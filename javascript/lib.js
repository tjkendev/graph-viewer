(function(e){"use strict";var t={},i=function(e){var s,r,o,n,a;i.classes.dispatcher.extend(this);var d=this,l=e||{};if("string"==typeof l||l instanceof HTMLElement?l={renderers:[l]}:"[object Array]"===Object.prototype.toString.call(l)&&(l={renderers:l}),n=l.renderers||l.renderer||l.container,l.renderers&&0!==l.renderers.length||("string"==typeof n||n instanceof HTMLElement||"object"==typeof n&&"container"in n)&&(l.renderers=[n]),l.id){if(t[l.id])throw'sigma: Instance "'+l.id+'" already exists.';Object.defineProperty(this,"id",{value:l.id})}else{for(a=0;t[a];)a++;Object.defineProperty(this,"id",{value:""+a})}for(t[this.id]=this,this.settings=new i.classes.configurable(i.settings,l.settings||{}),Object.defineProperty(this,"graph",{value:new i.classes.graph(this.settings),configurable:!0}),Object.defineProperty(this,"middlewares",{value:[],configurable:!0}),Object.defineProperty(this,"cameras",{value:{},configurable:!0}),Object.defineProperty(this,"renderers",{value:{},configurable:!0}),Object.defineProperty(this,"renderersPerCamera",{value:{},configurable:!0}),Object.defineProperty(this,"cameraFrames",{value:{},configurable:!0}),Object.defineProperty(this,"camera",{get:function(){return this.cameras[0]}}),Object.defineProperty(this,"events",{value:["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","doubleClickNode","doubleClickNodes","rightClickNode","rightClickNodes","overNode","overNodes","outNode","outNodes","downNode","downNodes","upNode","upNodes"],configurable:!0}),this._handler=function(e){var t,i={};for(t in e.data)i[t]=e.data[t];i.renderer=e.target,this.dispatchEvent(e.type,i)}.bind(this),o=l.renderers||[],s=0,r=o.length;s<r;s++)this.addRenderer(o[s]);for(o=l.middlewares||[],s=0,r=o.length;s<r;s++)this.middlewares.push("string"==typeof o[s]?i.middlewares[o[s]]:o[s]);"object"==typeof l.graph&&l.graph&&(this.graph.read(l.graph),this.refresh()),window.addEventListener("resize",function(){d.settings&&d.refresh()})};if(i.prototype.addCamera=function(t){var s,r=this;if(!arguments.length){for(t=0;this.cameras[""+t];)t++;t=""+t}if(this.cameras[t])throw'sigma.addCamera: The camera "'+t+'" already exists.';return s=new i.classes.camera(t,this.graph,this.settings),this.cameras[t]=s,s.quadtree=new i.classes.quad,i.classes.edgequad!==e&&(s.edgequadtree=new i.classes.edgequad),s.bind("coordinatesUpdated",function(e){r.renderCamera(s,s.isAnimated)}),this.renderersPerCamera[t]=[],s},i.prototype.killCamera=function(e){if(!(e="string"==typeof e?this.cameras[e]:e))throw"sigma.killCamera: The camera is undefined.";var t,i,s=this.renderersPerCamera[e.id];for(i=s.length,t=i-1;t>=0;t--)this.killRenderer(s[t]);return delete this.renderersPerCamera[e.id],delete this.cameraFrames[e.id],delete this.cameras[e.id],e.kill&&e.kill(),this},i.prototype.addRenderer=function(e){var t,s,r,o,n=e||{};if("string"==typeof n?n={container:document.getElementById(n)}:n instanceof HTMLElement&&(n={container:n}),"string"==typeof n.container&&(n.container=document.getElementById(n.container)),"id"in n)t=n.id;else{for(t=0;this.renderers[""+t];)t++;t=""+t}if(this.renderers[t])throw'sigma.addRenderer: The renderer "'+t+'" already exists.';if(s="function"==typeof n.type?n.type:i.renderers[n.type],s=s||i.renderers.def,r="camera"in n?n.camera instanceof i.classes.camera?n.camera:this.cameras[n.camera]||this.addCamera(n.camera):this.addCamera(),this.cameras[r.id]!==r)throw"sigma.addRenderer: The camera is not properly referenced.";return o=new s(this.graph,r,this.settings,n),this.renderers[t]=o,Object.defineProperty(o,"id",{value:t}),o.bind&&o.bind(["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","clickEdge","clickEdges","doubleClickNode","doubleClickNodes","doubleClickEdge","doubleClickEdges","rightClickNode","rightClickNodes","rightClickEdge","rightClickEdges","overNode","overNodes","overEdge","overEdges","outNode","outNodes","outEdge","outEdges","downNode","downNodes","downEdge","downEdges","upNode","upNodes","upEdge","upEdges"],this._handler),this.renderersPerCamera[r.id].push(o),o},i.prototype.killRenderer=function(e){if(!(e="string"==typeof e?this.renderers[e]:e))throw"sigma.killRenderer: The renderer is undefined.";var t=this.renderersPerCamera[e.camera.id],i=t.indexOf(e);return i>=0&&t.splice(i,1),e.kill&&e.kill(),delete this.renderers[e.id],this},i.prototype.refresh=function(t){var s,r,o,n,a,d,l=0;for(t=t||{},n=this.middlewares||[],s=0,r=n.length;s<r;s++)n[s].call(this,0===s?"":"tmp"+l+":",s===r-1?"ready:":"tmp"+ ++l+":");for(o in this.cameras)a=this.cameras[o],a.settings("autoRescale")&&this.renderersPerCamera[a.id]&&this.renderersPerCamera[a.id].length?i.middlewares.rescale.call(this,n.length?"ready:":"",a.readPrefix,{width:this.renderersPerCamera[a.id][0].width,height:this.renderersPerCamera[a.id][0].height}):i.middlewares.copy.call(this,n.length?"ready:":"",a.readPrefix),t.skipIndexation||(d=i.utils.getBoundaries(this.graph,a.readPrefix),a.quadtree.index(this.graph.nodes(),{prefix:a.readPrefix,bounds:{x:d.minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}}),a.edgequadtree!==e&&a.settings("drawEdges")&&a.settings("enableEdgeHovering")&&a.edgequadtree.index(this.graph,{prefix:a.readPrefix,bounds:{x:d.minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}}));for(n=Object.keys(this.renderers),s=0,r=n.length;s<r;s++)if(this.renderers[n[s]].process)if(this.settings("skipErrors"))try{this.renderers[n[s]].process()}catch(e){console.log('Warning: The renderer "'+n[s]+'" crashed on ".process()"')}else this.renderers[n[s]].process();return this.render(),this},i.prototype.render=function(){var e,t,i;for(i=Object.keys(this.renderers),e=0,t=i.length;e<t;e++)if(this.settings("skipErrors"))try{this.renderers[i[e]].render()}catch(t){this.settings("verbose")&&console.log('Warning: The renderer "'+i[e]+'" crashed on ".render()"')}else this.renderers[i[e]].render();return this},i.prototype.renderCamera=function(e,t){var i,s,r,o=this;if(t)for(r=this.renderersPerCamera[e.id],i=0,s=r.length;i<s;i++)if(this.settings("skipErrors"))try{r[i].render()}catch(e){this.settings("verbose")&&console.log('Warning: The renderer "'+r[i].id+'" crashed on ".render()"')}else r[i].render();else if(!this.cameraFrames[e.id]){for(r=this.renderersPerCamera[e.id],i=0,s=r.length;i<s;i++)if(this.settings("skipErrors"))try{r[i].render()}catch(e){this.settings("verbose")&&console.log('Warning: The renderer "'+r[i].id+'" crashed on ".render()"')}else r[i].render();this.cameraFrames[e.id]=requestAnimationFrame(function(){delete o.cameraFrames[e.id]})}return this},i.prototype.kill=function(){var e;this.dispatchEvent("kill"),this.graph.kill(),delete this.middlewares;for(e in this.renderers)this.killRenderer(this.renderers[e]);for(e in this.cameras)this.killCamera(this.cameras[e]);delete this.renderers,delete this.cameras;for(e in this)this.hasOwnProperty(e)&&delete this[e];delete t[this.id]},i.instances=function(e){return arguments.length?t[e]:i.utils.extend({},t)},i.version="1.2.0",void 0!==this.sigma)throw"An object called sigma is already in the global scope.";this.sigma=i}).call(this),function(e){"use strict";function t(e,i){var s,r,o,n;if(arguments.length)if(1===arguments.length&&Object(arguments[0])===arguments[0])for(e in arguments[0])t(e,arguments[0][e]);else if(arguments.length>1)for(n=Array.isArray(e)?e:e.split(/ /),s=0,r=n.length;s!==r;s+=1)o=n[s],M[o]||(M[o]=[]),M[o].push({handler:i})}function i(e,t){var i,s,r,o,n,a,d=Array.isArray(e)?e:e.split(/ /);if(arguments.length)if(t)for(i=0,s=d.length;i!==s;i+=1){if(a=d[i],M[a]){for(n=[],r=0,o=M[a].length;r!==o;r+=1)M[a][r].handler!==t&&n.push(M[a][r]);M[a]=n}M[a]&&0===M[a].length&&delete M[a]}else for(i=0,s=d.length;i!==s;i+=1)delete M[d[i]];else M=Object.create(null)}function s(e,t){var i,s,r,o,n,a,d=Array.isArray(e)?e:e.split(/ /);for(t=void 0===t?{}:t,i=0,r=d.length;i!==r;i+=1)if(a=d[i],M[a])for(n={type:a,data:t||{}},s=0,o=M[a].length;s!==o;s+=1)try{M[a][s].handler(n)}catch(e){}}function r(){var e,t,i,s,r=!1,o=x(),n=A.shift();if(i=n.job(),o=x()-o,n.done++,n.time+=o,n.currentTime+=o,n.weightTime=n.currentTime/(n.weight||1),n.averageTime=n.time/n.done,!(s=n.count?n.count<=n.done:!i)){for(e=0,t=A.length;e<t;e++)if(A[e].weightTime>n.weightTime){A.splice(e,0,n),r=!0;break}r||A.push(n)}return s?n:null}function o(e){var t=A.length;w[e.id]=e,e.status="running",t&&(e.weightTime=A[t-1].weightTime,e.currentTime=e.weightTime*(e.weight||1)),e.startTime=x(),s("jobStarted",p(e)),A.push(e)}function n(){var e,t,i;for(e in E)t=E[e],t.after?T[e]=t:o(t),delete E[e];for(b=!!A.length;A.length&&x()-v<C.frameDuration;)if(i=r()){d(i.id);for(e in T)T[e].after===i.id&&(o(T[e]),delete T[e])}b?(v=x(),s("enterFrame"),setTimeout(n,0)):s("stop")}function a(e,t){var i,r,o;if(Array.isArray(e)){for(_=!0,i=0,r=e.length;i<r;i++)a(e[i].id,m(e[i],t));_=!1,b||(v=x(),s("start"),n())}else if("object"==typeof e)if("string"==typeof e.id)a(e.id,e);else{_=!0;for(i in e)"function"==typeof e[i]?a(i,m({job:e[i]},t)):a(i,m(e[i],t));_=!1,b||(v=x(),s("start"),n())}else{if("string"!=typeof e)throw new Error("[conrad.addJob] Wrong arguments.");if(h(e))throw new Error('[conrad.addJob] Job with id "'+e+'" already exists.');if("function"==typeof t)o={id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0,job:t};else{if("object"!=typeof t)throw new Error("[conrad.addJob] Wrong arguments.");o=m({id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0},t)}E[e]=o,s("jobAdded",p(o)),b||_||(v=x(),s("start"),n())}return this}function d(e){var t,i,r,o,n=!1;if(Array.isArray(e))for(t=0,i=e.length;t<i;t++)d(e[t]);else{if("string"!=typeof e)throw new Error("[conrad.killJob] Wrong arguments.");for(r=[w,T,E],t=0,i=r.length;t<i;t++)e in r[t]&&(o=r[t][e],C.history&&(o.status="done",S.push(o)),s("jobEnded",p(o)),delete r[t][e],"function"==typeof o.end&&o.end(),n=!0);for(r=A,t=0,i=r.length;t<i;t++)if(r[t].id===e){r.splice(t,1);break}if(!n)throw new Error('[conrad.killJob] Job "'+e+'" not found.')}return this}function l(){var e,t=m(E,w,T);if(C.history)for(e in t)t[e].status="done",S.push(t[e]),"function"==typeof t[e].end&&t[e].end();return E={},T={},w={},A=[],b=!1,this}function h(e){var t=E[e]||w[e]||T[e];return t?m(t):null}function g(e,t){var i;if("string"==typeof a1&&1===arguments.length)return C[a1];i="object"==typeof a1&&1===arguments.length?a1||{}:{},"string"==typeof a1&&(i[a1]=a2);for(var s in i)void 0!==i[s]?C[s]=i[s]:delete C[s];return this}function u(){return b}function c(){return S=[],this}function f(e,t){var i,s,r,o,n,a,d;if(!arguments.length){n=[];for(s in E)n.push(E[s]);for(s in T)n.push(T[s]);for(s in w)n.push(w[s]);n=n.concat(S)}if("string"==typeof e)switch(e){case"waiting":n=y(T);break;case"running":n=y(w);break;case"done":n=S;break;default:a=e}if(e instanceof RegExp&&(a=e),!a&&("string"==typeof t||t instanceof RegExp)&&(a=t),a){if(d="string"==typeof a,n instanceof Array)i=n;else if("object"==typeof n){i=[];for(s in n)i=i.concat(n[s])}else{i=[];for(s in E)i.push(E[s]);for(s in T)i.push(T[s]);for(s in w)i.push(w[s]);i=i.concat(S)}for(n=[],r=0,o=i.length;r<o;r++)(d?i[r].id===a:i[r].id.match(a))&&n.push(i[r])}return p(n)}function m(){var e,t,i={},s=arguments.length;for(e=s-1;e>=0;e--)for(t in arguments[e])i[t]=arguments[e][t];return i}function p(e){var t,i,s;if(!e)return e;if(Array.isArray(e))for(t=[],i=0,s=e.length;i<s;i++)t.push(p(e[i]));else if("object"==typeof e){t={};for(i in e)t[i]=p(e[i])}else t=e;return t}function y(e){var t,i=[];for(t in e)i.push(e[t]);return i}function x(){return Date.now?Date.now():(new Date).getTime()}if(e.conrad)throw new Error("conrad already exists");var v,b=!1,E={},w={},A=[],T={},S=[],_=!1,C={frameDuration:20,history:!0},M=Object.create(null);Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var k={hasJob:h,addJob:a,killJob:d,killAll:l,settings:g,getStats:f,isRunning:u,clearHistory:c,bind:t,unbind:i,version:"0.1.0"};"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports.conrad=k),e.conrad=k}(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";var t=this;sigma.utils=sigma.utils||{},sigma.utils.extend=function(){var e,t,i={},s=arguments.length;for(e=s-1;e>=0;e--)for(t in arguments[e])i[t]=arguments[e][t];return i},sigma.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()},sigma.utils.pkg=function(e){return(e||"").split(".").reduce(function(e,t){return t in e?e[t]:e[t]={}},t)},sigma.utils.id=function(){var e=0;return function(){return++e}}();var i={};sigma.utils.floatColor=function(e){if(i[e])return i[e];var t=e,s=0,r=0,o=0;"#"===e[0]?(e=e.slice(1),3===e.length?(s=parseInt(e.charAt(0)+e.charAt(0),16),r=parseInt(e.charAt(1)+e.charAt(1),16),o=parseInt(e.charAt(2)+e.charAt(2),16)):(s=parseInt(e.charAt(0)+e.charAt(1),16),r=parseInt(e.charAt(2)+e.charAt(3),16),o=parseInt(e.charAt(4)+e.charAt(5),16))):e.match(/^ *rgba? *\(/)&&(e=e.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),s=+e[1],r=+e[2],o=+e[3]);var n=256*s*256+256*r+o;return i[t]=n,n},sigma.utils.zoomTo=function(e,t,i,s,r){var o,n,a,d=e.settings;(n=Math.max(d("zoomMin"),Math.min(d("zoomMax"),e.ratio*s)))!==e.ratio&&(s=n/e.ratio,a={x:t*(1-s)+e.x,y:i*(1-s)+e.y,ratio:n},r&&r.duration?(o=sigma.misc.animation.killAll(e),r=sigma.utils.extend(r,{easing:o?"quadraticOut":"quadraticInOut"}),sigma.misc.animation.camera(e,a,r)):(e.goTo(a),r&&r.onComplete&&r.onComplete()))},sigma.utils.getQuadraticControlPoint=function(e,t,i,s){return{x:(e+i)/2+(s-t)/4,y:(t+s)/2+(e-i)/4}},sigma.utils.getPointOnQuadraticCurve=function(e,t,i,s,r,o,n){return{x:Math.pow(1-e,2)*t+2*(1-e)*e*o+Math.pow(e,2)*s,y:Math.pow(1-e,2)*i+2*(1-e)*e*n+Math.pow(e,2)*r}},sigma.utils.getPointOnBezierCurve=function(e,t,i,s,r,o,n,a,d){var l=Math.pow(1-e,3),h=3*e*Math.pow(1-e,2),g=3*Math.pow(e,2)*(1-e),u=Math.pow(e,3);return{x:l*t+h*o+g*a+u*s,y:l*i+h*n+g*d+u*r}},sigma.utils.getSelfLoopControlPoints=function(e,t,i){return{x1:e-7*i,y1:t,x2:e,y2:t+7*i}},sigma.utils.getDistance=function(e,t,i,s){return Math.sqrt(Math.pow(i-e,2)+Math.pow(s-t,2))},sigma.utils.getCircleIntersection=function(e,t,i,s,r,o){var n,a,d,l,h,g,u,c,f;return a=s-e,d=r-t,!((l=Math.sqrt(d*d+a*a))>i+o)&&(!(l<Math.abs(i-o))&&(n=(i*i-o*o+l*l)/(2*l),c=e+a*n/l,f=t+d*n/l,h=Math.sqrt(i*i-n*n),g=h/l*-d,u=a*(h/l),{xi:c+g,xi_prime:c-g,yi:f+u,yi_prime:f-u}))},sigma.utils.isPointOnSegment=function(e,t,i,s,r,o,n){return Math.abs((t-s)*(r-i)-(e-i)*(o-s))/sigma.utils.getDistance(i,s,r,o)<n&&Math.min(i,r)<=e&&e<=Math.max(i,r)&&Math.min(s,o)<=t&&t<=Math.max(s,o)},sigma.utils.isPointOnQuadraticCurve=function(e,t,i,s,r,o,n,a,d){var l=sigma.utils.getDistance(i,s,r,o);if(Math.abs(e-i)>l||Math.abs(t-s)>l)return!1;for(var h,g=sigma.utils.getDistance(e,t,i,s),u=sigma.utils.getDistance(e,t,r,o),c=.5,f=g<u?-.01:.01,m=100,p=sigma.utils.getPointOnQuadraticCurve(c,i,s,r,o,n,a),y=sigma.utils.getDistance(e,t,p.x,p.y);m-- >0&&c>=0&&c<=1&&y>d&&(f>.001||f<-.001);)h=y,p=sigma.utils.getPointOnQuadraticCurve(c,i,s,r,o,n,a),y=sigma.utils.getDistance(e,t,p.x,p.y),y>h?(f=-f/2,c+=f):c+f<0||c+f>1?(f/=2,y=h):c+=f;return y<d},sigma.utils.isPointOnBezierCurve=function(e,t,i,s,r,o,n,a,d,l,h){var g=sigma.utils.getDistance(i,s,n,a);if(Math.abs(e-i)>g||Math.abs(t-s)>g)return!1;for(var u,c=sigma.utils.getDistance(e,t,i,s),f=sigma.utils.getDistance(e,t,r,o),m=.5,p=c<f?-.01:.01,y=100,x=sigma.utils.getPointOnBezierCurve(m,i,s,r,o,n,a,d,l),v=sigma.utils.getDistance(e,t,x.x,x.y);y-- >0&&m>=0&&m<=1&&v>h&&(p>.001||p<-.001);)u=v,x=sigma.utils.getPointOnBezierCurve(m,i,s,r,o,n,a,d,l),v=sigma.utils.getDistance(e,t,x.x,x.y),v>u?(p=-p/2,m+=p):m+p<0||m+p>1?(p/=2,v=u):m+=p;return v<h},sigma.utils.getX=function(t){return t.offsetX!==e&&t.offsetX||t.layerX!==e&&t.layerX||t.clientX!==e&&t.clientX},sigma.utils.getY=function(t){return t.offsetY!==e&&t.offsetY||t.layerY!==e&&t.layerY||t.clientY!==e&&t.clientY},sigma.utils.getPixelRatio=function(){var t=1;return window.screen.deviceXDPI!==e&&window.screen.logicalXDPI!==e&&window.screen.deviceXDPI>window.screen.logicalXDPI?t=window.screen.systemXDPI/window.screen.logicalXDPI:window.devicePixelRatio!==e&&(t=window.devicePixelRatio),t},sigma.utils.getWidth=function(t){var i=t.target.ownerSVGElement?t.target.ownerSVGElement.width:t.target.width;return"number"==typeof i&&i||i!==e&&i.baseVal!==e&&i.baseVal.value},sigma.utils.getCenter=function(e){var t=-1!==e.target.namespaceURI.indexOf("svg")?1:sigma.utils.getPixelRatio();return{x:sigma.utils.getWidth(e)/(2*t),y:sigma.utils.getHeight(e)/(2*t)}},sigma.utils.mouseCoords=function(e,t,i){return t=t||sigma.utils.getX(e),i=i||sigma.utils.getY(e),{x:t-sigma.utils.getCenter(e).x,y:i-sigma.utils.getCenter(e).y,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}},sigma.utils.getHeight=function(t){var i=t.target.ownerSVGElement?t.target.ownerSVGElement.height:t.target.height;return"number"==typeof i&&i||i!==e&&i.baseVal!==e&&i.baseVal.value},sigma.utils.getDelta=function(t){return t.wheelDelta!==e&&t.wheelDelta||t.detail!==e&&-t.detail},sigma.utils.getOffset=function(e){for(var t=0,i=0;e;)i+=parseInt(e.offsetTop),t+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:i,left:t}},sigma.utils.doubleClick=function(e,t,i){var s,r=0;e._doubleClickHandler=e._doubleClickHandler||{},e._doubleClickHandler[t]=e._doubleClickHandler[t]||[],s=e._doubleClickHandler[t],s.push(function(e){return r++,2===r?(r=0,i(e)):void(1===r&&setTimeout(function(){r=0},sigma.settings.doubleClickTimeout))}),e.addEventListener(t,s[s.length-1],!1)},sigma.utils.unbindDoubleClick=function(e,t){for(var i,s=(e._doubleClickHandler||{})[t]||[];i=s.pop();)e.removeEventListener(t,i);delete(e._doubleClickHandler||{})[t]},sigma.utils.easings=sigma.utils.easings||{},sigma.utils.easings.linearNone=function(e){return e},sigma.utils.easings.quadraticIn=function(e){return e*e},sigma.utils.easings.quadraticOut=function(e){return e*(2-e)},sigma.utils.easings.quadraticInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},sigma.utils.easings.cubicIn=function(e){return e*e*e},sigma.utils.easings.cubicOut=function(e){return--e*e*e+1},sigma.utils.easings.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},sigma.utils.loadShader=function(e,t,i,s){var r,o=e.createShader(i);return e.shaderSource(o,t),e.compileShader(o),r=e.getShaderParameter(o,e.COMPILE_STATUS),r?o:(s&&s('Error compiling shader "'+o+'":'+e.getShaderInfoLog(o)),e.deleteShader(o),null)},sigma.utils.loadProgram=function(e,t,i,s,r){var o,n,a=e.createProgram();for(o=0;o<t.length;++o)e.attachShader(a,t[o]);if(i)for(o=0;o<i.length;++o)e.bindAttribLocation(a,locations?locations[o]:o,opt_attribs[o]);return e.linkProgram(a),n=e.getProgramParameter(a,e.LINK_STATUS),n?a:(r&&r("Error in program linking: "+e.getProgramInfoLog(a)),e.deleteProgram(a),null)},sigma.utils.pkg("sigma.utils.matrices"),sigma.utils.matrices.translation=function(e,t){return[1,0,0,0,1,0,e,t,1]},sigma.utils.matrices.rotation=function(e,t){var i=Math.cos(e),s=Math.sin(e);return t?[i,-s,s,i]:[i,-s,0,s,i,0,0,0,1]},sigma.utils.matrices.scale=function(e,t){return t?[e,0,0,e]:[e,0,0,0,e,0,0,0,1]},sigma.utils.matrices.multiply=function(e,t,i){var s=i?2:3,r=e[0*s+0],o=e[0*s+1],n=e[0*s+2],a=e[1*s+0],d=e[1*s+1],l=e[1*s+2],h=e[2*s+0],g=e[2*s+1],u=e[2*s+2],c=t[0*s+0],f=t[0*s+1],m=t[0*s+2],p=t[1*s+0],y=t[1*s+1],x=t[1*s+2],v=t[2*s+0],b=t[2*s+1],E=t[2*s+2];return i?[r*c+o*p,r*f+o*y,a*c+d*p,a*f+d*y]:[r*c+o*p+n*v,r*f+o*y+n*b,r*m+o*x+n*E,a*c+d*p+l*v,a*f+d*y+l*b,a*m+d*x+l*E,h*c+g*p+u*v,h*f+g*y+u*b,h*m+g*x+u*E]}}.call(this),function(e){"use strict";var t,i=0,s=["ms","moz","webkit","o"];for(t=0;t<s.length&&!e.requestAnimationFrame;t++)e.requestAnimationFrame=e[s[t]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[s[t]+"CancelAnimationFrame"]||e[s[t]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(t,s){var r=(new Date).getTime(),o=Math.max(0,16-(r-i)),n=e.setTimeout(function(){t(r+o)},o);return i=r+o,n}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t,i,s=Array.prototype.slice.call(arguments,1),r=this;return t=function(){},i=function(){return r.apply(this instanceof t&&e?this:e,s.concat(Array.prototype.slice.call(arguments)))},t.prototype=this.prototype,i.prototype=new t,i})}(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.settings");var t={clone:!0,immutable:!0,verbose:!1,classPrefix:"sigma",defaultNodeType:"def",defaultEdgeType:"def",defaultLabelColor:"#000",defaultEdgeColor:"#000",defaultNodeColor:"#000",defaultLabelSize:14,edgeColor:"source",minArrowSize:0,font:"arial",fontStyle:"",labelColor:"default",labelSize:"fixed",labelSizeRatio:1,labelThreshold:8,webglOversamplingRatio:2,borderSize:0,defaultNodeBorderColor:"#000",hoverFont:"",singleHover:!0,hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",edgeHoverColor:"edge",edgeHoverSizeRatio:1,defaultEdgeHoverColor:"#000",edgeHoverExtremities:!1,drawEdges:!0,drawNodes:!0,drawLabels:!0,drawEdgeLabels:!1,batchEdgesDrawing:!1,hideEdgesOnMove:!1,canvasEdgesBatchSize:500,webglEdgesBatchSize:1e3,scalingMode:"inside",sideMargin:0,minEdgeSize:.5,maxEdgeSize:1,minNodeSize:1,maxNodeSize:8,touchEnabled:!0,mouseEnabled:!0,mouseWheelEnabled:!0,doubleClickEnabled:!0,eventsEnabled:!0,zoomingRatio:1.7,doubleClickZoomingRatio:2.2,zoomMin:.0625,zoomMax:2,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:3,touchInertiaDuration:200,touchInertiaRatio:3,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,autoResize:!0,autoRescale:!0,enableCamera:!0,enableHovering:!0,enableEdgeHovering:!1,edgeHoverPrecision:5,rescaleIgnoreSize:!1,skipErrors:!1,nodesPowRatio:.5,edgesPowRatio:.5,animationsTime:200};sigma.settings=sigma.utils.extend(sigma.settings||{},t)}.call(this),function(){"use strict";var e=function(){Object.defineProperty(this,"_handlers",{value:{}})};e.prototype.bind=function(e,t){var i,s,r,o;if(1===arguments.length&&"object"==typeof arguments[0])for(e in arguments[0])this.bind(e,arguments[0][e]);else{if(2!==arguments.length||"function"!=typeof arguments[1])throw"bind: Wrong arguments.";for(o="string"==typeof e?e.split(" "):e,i=0,s=o.length;i!==s;i+=1)(r=o[i])&&(this._handlers[r]||(this._handlers[r]=[]),this._handlers[r].push({handler:t}))}return this},e.prototype.unbind=function(e,t){var i,s,r,o,n,a,d,l="string"==typeof e?e.split(" "):e;if(!arguments.length){for(n in this._handlers)delete this._handlers[n];return this}if(t)for(i=0,s=l.length;i!==s;i+=1){if(d=l[i],this._handlers[d]){for(a=[],r=0,o=this._handlers[d].length;r!==o;r+=1)this._handlers[d][r].handler!==t&&a.push(this._handlers[d][r]);this._handlers[d]=a}this._handlers[d]&&0===this._handlers[d].length&&delete this._handlers[d]}else for(i=0,s=l.length;i!==s;i+=1)delete this._handlers[l[i]];return this},e.prototype.dispatchEvent=function(e,t){var i,s,r,o,n,a,d,l=this,h="string"==typeof e?e.split(" "):e;for(t=void 0===t?{}:t,i=0,s=h.length;i!==s;i+=1)if(d=h[i],this._handlers[d]){for(a=l.getEvent(d,t),n=[],r=0,o=this._handlers[d].length;r!==o;r+=1)this._handlers[d][r].handler(a),this._handlers[d][r].one||n.push(this._handlers[d][r]);this._handlers[d]=n}return this},e.prototype.getEvent=function(e,t){return{type:e,data:t||{},target:this}},e.extend=function(t,i){var s;for(s in e.prototype)e.prototype.hasOwnProperty(s)&&(t[s]=e.prototype[s]);e.apply(t,i)},void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.dispatcher=e):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.dispatcher=e):this.dispatcher=e}.call(this),function(){"use strict";var e=function(){var t,i,s={},r=Array.prototype.slice.call(arguments,0),o=function(e,t){var i,n,a,d;if(1!==arguments.length||"string"!=typeof e){if("object"==typeof e&&"string"==typeof t)return void 0!==(e||{})[t]?e[t]:o(t);for(i="object"==typeof e&&void 0===t?e:{},"string"==typeof e&&(i[e]=t),n=0,d=Object.keys(i),a=d.length;n<a;n++)s[d[n]]=i[d[n]];return this}if(void 0!==s[e])return s[e];for(n=0,a=r.length;n<a;n++)if(void 0!==r[n][e])return r[n][e]};for(o.embedObjects=function(){var t=r.concat(s).concat(Array.prototype.splice.call(arguments,0));return e.apply({},t)},t=0,i=arguments.length;t<i;t++)o(arguments[t]);return o};void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.configurable=e):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.configurable=e):this.configurable=e}.call(this),function(e){"use strict";function t(e,t,i){return function(){var s,r;for(s in a[e])a[e][s].apply(t,arguments);r=i.apply(t,arguments);for(s in n[e])n[e][s].apply(t,arguments);return r}}function i(e){var t;for(t in e)"hasOwnProperty"in e&&!e.hasOwnProperty(t)||delete e[t];return e}var s=Object.create(null),r=Object.create(null),o=Object.create(null),n=Object.create(null),a=Object.create(null),d={immutable:!0,clone:!0},l=function(e){return d[e]},h=function(e){var i,r,n;n={settings:e||l,nodesArray:[],edgesArray:[],nodesIndex:Object.create(null),edgesIndex:Object.create(null),inNeighborsIndex:Object.create(null),outNeighborsIndex:Object.create(null),allNeighborsIndex:Object.create(null),inNeighborsCount:Object.create(null),outNeighborsCount:Object.create(null),allNeighborsCount:Object.create(null)};for(i in o)o[i].call(n);for(i in s)r=t(i,n,s[i]),this[i]=r,n[i]=r};h.addMethod=function(e,t){if("string"!=typeof e||"function"!=typeof t||2!==arguments.length)throw"addMethod: Wrong arguments.";if(s[e]||h[e])throw'The method "'+e+'" already exists.';return s[e]=t,n[e]=Object.create(null),a[e]=Object.create(null),this},h.hasMethod=function(e){return!(!s[e]&&!h[e])},h.attach=function(e,t,i,s){if("string"!=typeof e||"string"!=typeof t||"function"!=typeof i||arguments.length<3||arguments.length>4)throw"attach: Wrong arguments.";var r;if("constructor"===e)r=o;else if(s){if(!a[e])throw'The method "'+e+'" does not exist.';r=a[e]}else{if(!n[e])throw'The method "'+e+'" does not exist.';r=n[e]}if(r[t])throw'A function "'+t+'" is already attached to the method "'+e+'".';return r[t]=i,this},h.attachBefore=function(e,t,i){return this.attach(e,t,i,!0)},h.addIndex=function(e,t){if("string"!=typeof e||Object(t)!==t||2!==arguments.length)throw"addIndex: Wrong arguments.";if(r[e])throw'The index "'+e+'" already exists.';var i;r[e]=t;for(i in t){if("function"!=typeof t[i])throw"The bindings must be functions.";h.attach(i,e,t[i])}return this},h.addMethod("addNode",function(e){if(Object(e)!==e||1!==arguments.length)throw"addNode: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The node must have a string or number id.";if(this.nodesIndex[e.id])throw'The node "'+e.id+'" already exists.';var t,i=e.id,s=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&(s[t]=e[t]);else s=e;return this.settings("immutable")?Object.defineProperty(s,"id",{value:i,enumerable:!0}):s.id=i,this.inNeighborsIndex[i]=Object.create(null),this.outNeighborsIndex[i]=Object.create(null),this.allNeighborsIndex[i]=Object.create(null),this.inNeighborsCount[i]=0,this.outNeighborsCount[i]=0,this.allNeighborsCount[i]=0,this.nodesArray.push(s),this.nodesIndex[s.id]=s,this}),h.addMethod("addEdge",function(e){if(Object(e)!==e||1!==arguments.length)throw"addEdge: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The edge must have a string or number id.";if("string"!=typeof e.source&&"number"!=typeof e.source||!this.nodesIndex[e.source])throw"The edge source must have an existing node id.";if("string"!=typeof e.target&&"number"!=typeof e.target||!this.nodesIndex[e.target])throw"The edge target must have an existing node id.";if(this.edgesIndex[e.id])throw'The edge "'+e.id+'" already exists.';var t,i=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&"source"!==t&&"target"!==t&&(i[t]=e[t]);else i=e;return this.settings("immutable")?(Object.defineProperty(i,"id",{value:e.id,enumerable:!0}),Object.defineProperty(i,"source",{value:e.source,enumerable:!0}),Object.defineProperty(i,"target",{value:e.target,enumerable:!0})):(i.id=e.id,i.source=e.source,i.target=e.target),this.edgesArray.push(i),this.edgesIndex[i.id]=i,this.inNeighborsIndex[i.target][i.source]||(this.inNeighborsIndex[i.target][i.source]=Object.create(null)),this.inNeighborsIndex[i.target][i.source][i.id]=i,this.outNeighborsIndex[i.source][i.target]||(this.outNeighborsIndex[i.source][i.target]=Object.create(null)),this.outNeighborsIndex[i.source][i.target][i.id]=i,this.allNeighborsIndex[i.source][i.target]||(this.allNeighborsIndex[i.source][i.target]=Object.create(null)),this.allNeighborsIndex[i.source][i.target][i.id]=i,i.target!==i.source&&(this.allNeighborsIndex[i.target][i.source]||(this.allNeighborsIndex[i.target][i.source]=Object.create(null)),this.allNeighborsIndex[i.target][i.source][i.id]=i),this.inNeighborsCount[i.target]++,this.outNeighborsCount[i.source]++,this.allNeighborsCount[i.target]++,this.allNeighborsCount[i.source]++,this}),h.addMethod("dropNode",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropNode: Wrong arguments.";if(!this.nodesIndex[e])throw'The node "'+e+'" does not exist.';var t,i,s;for(delete this.nodesIndex[e],t=0,s=this.nodesArray.length;t<s;t++)if(this.nodesArray[t].id===e){this.nodesArray.splice(t,1);break}for(t=this.edgesArray.length-1;t>=0;t--)this.edgesArray[t].source!==e&&this.edgesArray[t].target!==e||this.dropEdge(this.edgesArray[t].id);delete this.inNeighborsIndex[e],delete this.outNeighborsIndex[e],delete this.allNeighborsIndex[e],delete this.inNeighborsCount[e],delete this.outNeighborsCount[e],delete this.allNeighborsCount[e];for(i in this.nodesIndex)delete this.inNeighborsIndex[i][e],delete this.outNeighborsIndex[i][e],delete this.allNeighborsIndex[i][e];return this}),h.addMethod("dropEdge",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropEdge: Wrong arguments.";if(!this.edgesIndex[e])throw'The edge "'+e+'" does not exist.';var t,i,s;for(s=this.edgesIndex[e],delete this.edgesIndex[e],t=0,i=this.edgesArray.length;t<i;t++)if(this.edgesArray[t].id===e){this.edgesArray.splice(t,1);break}return delete this.inNeighborsIndex[s.target][s.source][s.id],Object.keys(this.inNeighborsIndex[s.target][s.source]).length||delete this.inNeighborsIndex[s.target][s.source],delete this.outNeighborsIndex[s.source][s.target][s.id],Object.keys(this.outNeighborsIndex[s.source][s.target]).length||delete this.outNeighborsIndex[s.source][s.target],delete this.allNeighborsIndex[s.source][s.target][s.id],Object.keys(this.allNeighborsIndex[s.source][s.target]).length||delete this.allNeighborsIndex[s.source][s.target],s.target!==s.source&&(delete this.allNeighborsIndex[s.target][s.source][s.id],Object.keys(this.allNeighborsIndex[s.target][s.source]).length||delete this.allNeighborsIndex[s.target][s.source]),this.inNeighborsCount[s.target]--,this.outNeighborsCount[s.source]--,this.allNeighborsCount[s.source]--,this.allNeighborsCount[s.target]--,this}),h.addMethod("kill",function(){this.nodesArray.length=0,this.edgesArray.length=0,delete this.nodesArray,delete this.edgesArray,delete this.nodesIndex,delete this.edgesIndex,delete this.inNeighborsIndex,delete this.outNeighborsIndex,delete this.allNeighborsIndex,delete this.inNeighborsCount,delete this.outNeighborsCount,delete this.allNeighborsCount}),h.addMethod("clear",function(){
return this.nodesArray.length=0,this.edgesArray.length=0,i(this.nodesIndex),i(this.edgesIndex),i(this.nodesIndex),i(this.inNeighborsIndex),i(this.outNeighborsIndex),i(this.allNeighborsIndex),i(this.inNeighborsCount),i(this.outNeighborsCount),i(this.allNeighborsCount),this}),h.addMethod("read",function(e){var t,i,s;for(i=e.nodes||[],t=0,s=i.length;t<s;t++)this.addNode(i[t]);for(i=e.edges||[],t=0,s=i.length;t<s;t++)this.addEdge(i[t]);return this}),h.addMethod("nodes",function(e){if(!arguments.length)return this.nodesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.nodesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,i,s=[];for(t=0,i=e.length;t<i;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"nodes: Wrong arguments.";s.push(this.nodesIndex[e[t]])}return s}throw"nodes: Wrong arguments."}),h.addMethod("degree",function(e,t){if(t={in:this.inNeighborsCount,out:this.outNeighborsCount}[t||""]||this.allNeighborsCount,"string"==typeof e||"number"==typeof e)return t[e];if("[object Array]"===Object.prototype.toString.call(e)){var i,s,r=[];for(i=0,s=e.length;i<s;i++){if("string"!=typeof e[i]&&"number"!=typeof e[i])throw"degree: Wrong arguments.";r.push(t[e[i]])}return r}throw"degree: Wrong arguments."}),h.addMethod("edges",function(e){if(!arguments.length)return this.edgesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.edgesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,i,s=[];for(t=0,i=e.length;t<i;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"edges: Wrong arguments.";s.push(this.edgesIndex[e[t]])}return s}throw"edges: Wrong arguments."}),"undefined"!=typeof sigma?(sigma.classes=sigma.classes||Object.create(null),sigma.classes.graph=h):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports.graph=h):this.graph=h}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.classes"),sigma.classes.camera=function(e,t,i,s){sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"graph",{value:t}),Object.defineProperty(this,"id",{value:e}),Object.defineProperty(this,"readPrefix",{value:"read_cam"+e+":"}),Object.defineProperty(this,"prefix",{value:"cam"+e+":"}),this.x=0,this.y=0,this.ratio=1,this.angle=0,this.isAnimated=!1,this.settings="object"==typeof s&&s?i.embedObject(s):i},sigma.classes.camera.prototype.goTo=function(t){if(!this.settings("enableCamera"))return this;var i,s,r=t||{},o=["x","y","ratio","angle"];for(i=0,s=o.length;i<s;i++)if(r[o[i]]!==e){if("number"!=typeof r[o[i]]||isNaN(r[o[i]]))throw'Value for "'+o[i]+'" is not a number.';this[o[i]]=r[o[i]]}return this.dispatchEvent("coordinatesUpdated"),this},sigma.classes.camera.prototype.applyView=function(t,i,s){s=s||{},i=i!==e?i:this.prefix,t=t!==e?t:this.readPrefix;var r,o,n,a=s.nodes||this.graph.nodes(),d=s.edges||this.graph.edges(),l=Math.cos(this.angle)/this.ratio,h=Math.sin(this.angle)/this.ratio,g=Math.pow(this.ratio,this.settings("nodesPowRatio")),u=Math.pow(this.ratio,this.settings("edgesPowRatio")),c=(s.width||0)/2-this.x*l-this.y*h,f=(s.height||0)/2-this.y*l+this.x*h;for(r=0,o=a.length;r<o;r++)n=a[r],n[i+"x"]=(n[t+"x"]||0)*l+(n[t+"y"]||0)*h+c,n[i+"y"]=(n[t+"y"]||0)*l-(n[t+"x"]||0)*h+f,n[i+"size"]=(n[t+"size"]||0)/g;for(r=0,o=d.length;r<o;r++)d[r][i+"size"]=(d[r][t+"size"]||0)/u;return this},sigma.classes.camera.prototype.graphPosition=function(e,t,i){var s=0,r=0,o=Math.cos(this.angle),n=Math.sin(this.angle);return i||(s=-(this.x*o+this.y*n)/this.ratio,r=-(this.y*o-this.x*n)/this.ratio),{x:(e*o+t*n)/this.ratio+s,y:(t*o-e*n)/this.ratio+r}},sigma.classes.camera.prototype.cameraPosition=function(e,t,i){var s=0,r=0,o=Math.cos(this.angle),n=Math.sin(this.angle);return i||(s=-(this.x*o+this.y*n)/this.ratio,r=-(this.y*o-this.x*n)/this.ratio),{x:((e-s)*o-(t-r)*n)*this.ratio,y:((t-r)*o+(e-s)*n)*this.ratio}},sigma.classes.camera.prototype.getMatrix=function(){var e=sigma.utils.matrices.scale(1/this.ratio),t=sigma.utils.matrices.rotation(this.angle),i=sigma.utils.matrices.translation(-this.x,-this.y);return sigma.utils.matrices.multiply(i,sigma.utils.matrices.multiply(t,e))},sigma.classes.camera.prototype.getRectangle=function(e,t){var i=this.cameraPosition(e,0,!0),s=this.cameraPosition(0,t,!0),r=this.cameraPosition(e/2,t/2,!0),o=this.cameraPosition(e/4,0,!0).x,n=this.cameraPosition(0,t/4,!0).y;return{x1:this.x-r.x-o,y1:this.y-r.y-n,x2:this.x-r.x+o+i.x,y2:this.y-r.y-n+i.y,height:Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y+2*n,2))}}}.call(this),function(e){"use strict";function t(e,t){var i=t.x+t.width/2,s=t.y+t.height/2,r=e.y<s,o=e.x<i;return r?o?0:1:o?2:3}function i(e,t){for(var i=[],s=0;s<4;s++)e.x2>=t[s][0].x&&e.x1<=t[s][1].x&&e.y1+e.height>=t[s][0].y&&e.y1<=t[s][2].y&&i.push(s);return i}function s(e,t){for(var i=[],s=0;s<4;s++)l.collision(e,t[s])&&i.push(s);return i}function r(e,t){var i,s,r=t.level+1,o=Math.round(t.bounds.width/2),n=Math.round(t.bounds.height/2),a=Math.round(t.bounds.x),l=Math.round(t.bounds.y);switch(e){case 0:i=a,s=l;break;case 1:i=a+o,s=l;break;case 2:i=a,s=l+n;break;case 3:i=a+o,s=l+n}return d({x:i,y:s,width:o,height:n},r,t.maxElements,t.maxLevel)}function o(t,s,n){if(n.level<n.maxLevel)for(var a=i(s,n.corners),d=0,l=a.length;d<l;d++)n.nodes[a[d]]===e&&(n.nodes[a[d]]=r(a[d],n)),o(t,s,n.nodes[a[d]]);else n.elements.push(t)}function n(i,s){if(s.level<s.maxLevel){var r=t(i,s.bounds);return s.nodes[r]!==e?n(i,s.nodes[r]):[]}return s.elements}function a(t,i,s,r){if(r=r||{},i.level<i.maxLevel)for(var o=s(t,i.corners),n=0,d=o.length;n<d;n++)i.nodes[o[n]]!==e&&a(t,i.nodes[o[n]],s,r);else for(var l=0,h=i.elements.length;l<h;l++)r[i.elements[l].id]===e&&(r[i.elements[l].id]=i.elements[l]);return r}function d(e,t,i,s){return{level:t||0,bounds:e,corners:l.splitSquare(e),maxElements:i||20,maxLevel:s||4,elements:[],nodes:[]}}var l={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),i=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:i.x,y:i.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var i=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:i*t.x,y:i*t.y}},axisCollision:function(e,t,i){for(var s=[],r=[],o=0;o<4;o++){var n=this.projection(t[o],e),a=this.projection(i[o],e);s.push(n.x*e.x+n.y*e.y),r.push(a.x*e.x+a.y*e.y)}var d=Math.max.apply(Math,s),l=Math.max.apply(Math,r),h=Math.min.apply(Math,s);return Math.min.apply(Math,r)<=d&&l>=h},collision:function(e,t){for(var i=this.axis(e,t),s=!0,r=0;r<4;r++)s=s&&this.axisCollision(i[r],e,t);return s}},h=function(){this._geom=l,this._tree=null,this._cache={query:!1,result:!1}};h.prototype.index=function(e,t){if(!t.bounds)throw"sigma.classes.quad.index: bounds information not given.";var i=t.prefix||"";this._tree=d(t.bounds,0,t.maxElements,t.maxLevel);for(var s=0,r=e.length;s<r;s++)o(e[s],l.pointToSquare({x:e[s][i+"x"],y:e[s][i+"y"],size:e[s][i+"size"]}),this._tree);return this._cache={query:!1,result:!1},this._tree},h.prototype.point=function(e,t){return this._tree?n({x:e,y:t},this._tree)||[]:[]},h.prototype.area=function(e){var t,r,o=JSON.stringify(e);if(this._cache.query===o)return this._cache.result;l.isAxisAligned(e)?(t=i,r=l.axisAlignedTopPoints(e)):(t=s,r=l.rectangleCorners(e));var n=this._tree?a(r,this._tree,t):[],d=[];for(var h in n)d.push(n[h]);return this._cache.query=o,this._cache.result=d,d},void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.quad=h):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports.quad=h):this.quad=h}.call(this),function(e){"use strict";function t(e,t){var i=t.x+t.width/2,s=t.y+t.height/2,r=e.y<s,o=e.x<i;return r?o?0:1:o?2:3}function i(e,t){for(var i=[],s=0;s<4;s++)e.x2>=t[s][0].x&&e.x1<=t[s][1].x&&e.y1+e.height>=t[s][0].y&&e.y1<=t[s][2].y&&i.push(s);return i}function s(e,t){for(var i=[],s=0;s<4;s++)l.collision(e,t[s])&&i.push(s);return i}function r(e,t){var i,s,r=t.level+1,o=Math.round(t.bounds.width/2),n=Math.round(t.bounds.height/2),a=Math.round(t.bounds.x),l=Math.round(t.bounds.y);switch(e){case 0:i=a,s=l;break;case 1:i=a+o,s=l;break;case 2:i=a,s=l+n;break;case 3:i=a+o,s=l+n}return d({x:i,y:s,width:o,height:n},r,t.maxElements,t.maxLevel)}function o(t,s,n){if(n.level<n.maxLevel)for(var a=i(s,n.corners),d=0,l=a.length;d<l;d++)n.nodes[a[d]]===e&&(n.nodes[a[d]]=r(a[d],n)),o(t,s,n.nodes[a[d]]);else n.elements.push(t)}function n(i,s){if(s.level<s.maxLevel){var r=t(i,s.bounds);return s.nodes[r]!==e?n(i,s.nodes[r]):[]}return s.elements}function a(t,i,s,r){if(r=r||{},i.level<i.maxLevel)for(var o=s(t,i.corners),n=0,d=o.length;n<d;n++)i.nodes[o[n]]!==e&&a(t,i.nodes[o[n]],s,r);else for(var l=0,h=i.elements.length;l<h;l++)r[i.elements[l].id]===e&&(r[i.elements[l].id]=i.elements[l]);return r}function d(e,t,i,s){return{level:t||0,bounds:e,corners:l.splitSquare(e),maxElements:i||40,maxLevel:s||8,elements:[],nodes:[]}}var l={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},lineToSquare:function(e){return e.y1<e.y2?e.x1<e.x2?{x1:e.x1-e.size,y1:e.y1-e.size,x2:e.x2+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:{x1:e.x2-e.size,y1:e.y1-e.size,x2:e.x1+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:e.x1<e.x2?{x1:e.x1-e.size,y1:e.y2-e.size,x2:e.x2+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}:{x1:e.x2-e.size,y1:e.y2-e.size,x2:e.x1+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}},quadraticCurveToSquare:function(e,t){var i=sigma.utils.getPointOnQuadraticCurve(.5,e.x1,e.y1,e.x2,e.y2,t.x,t.y),s=Math.min(e.x1,e.x2,i.x),r=Math.max(e.x1,e.x2,i.x),o=Math.min(e.y1,e.y2,i.y),n=Math.max(e.y1,e.y2,i.y);return{x1:s-e.size,y1:o-e.size,x2:r+e.size,y2:o-e.size,height:n-o+2*e.size}},selfLoopToSquare:function(e){var t=sigma.utils.getSelfLoopControlPoints(e.x,e.y,e.size),i=Math.min(e.x,t.x1,t.x2),s=Math.max(e.x,t.x1,t.x2),r=Math.min(e.y,t.y1,t.y2),o=Math.max(e.y,t.y1,t.y2);return{x1:i-e.size,y1:r-e.size,x2:s+e.size,y2:r-e.size,height:o-r+2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),i=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:i.x,y:i.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var i=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:i*t.x,y:i*t.y}},axisCollision:function(e,t,i){for(var s=[],r=[],o=0;o<4;o++){var n=this.projection(t[o],e),a=this.projection(i[o],e);s.push(n.x*e.x+n.y*e.y),r.push(a.x*e.x+a.y*e.y)}var d=Math.max.apply(Math,s),l=Math.max.apply(Math,r),h=Math.min.apply(Math,s);return Math.min.apply(Math,r)<=d&&l>=h},collision:function(e,t){for(var i=this.axis(e,t),s=!0,r=0;r<4;r++)s=s&&this.axisCollision(i[r],e,t);return s}},h=function(){this._geom=l,this._tree=null,this._cache={query:!1,result:!1},this._enabled=!0};h.prototype.index=function(e,t){if(!this._enabled)return this._tree;if(!t.bounds)throw"sigma.classes.edgequad.index: bounds information not given.";var i,s,r,n,a,h=t.prefix||"";this._tree=d(t.bounds,0,t.maxElements,t.maxLevel);for(var g=e.edges(),u=0,c=g.length;u<c;u++)s=e.nodes(g[u].source),r=e.nodes(g[u].target),a={x1:s[h+"x"],y1:s[h+"y"],x2:r[h+"x"],y2:r[h+"y"],size:g[u][h+"size"]||0},"curve"===g[u].type||"curvedArrow"===g[u].type?s.id===r.id?(n={x:s[h+"x"],y:s[h+"y"],size:s[h+"size"]||0},o(g[u],l.selfLoopToSquare(n),this._tree)):(i=sigma.utils.getQuadraticControlPoint(a.x1,a.y1,a.x2,a.y2),o(g[u],l.quadraticCurveToSquare(a,i),this._tree)):o(g[u],l.lineToSquare(a),this._tree);return this._cache={query:!1,result:!1},this._tree},h.prototype.point=function(e,t){return this._enabled&&this._tree?n({x:e,y:t},this._tree)||[]:[]},h.prototype.area=function(e){if(!this._enabled)return[];var t,r,o=JSON.stringify(e);if(this._cache.query===o)return this._cache.result;l.isAxisAligned(e)?(t=i,r=l.axisAlignedTopPoints(e)):(t=s,r=l.rectangleCorners(e));var n=this._tree?a(r,this._tree,t):[],d=[];for(var h in n)d.push(n[h]);return this._cache.query=o,this._cache.result=d,d},void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.edgequad=h):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports.edgequad=h):this.edgequad=h}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.mouse=function(e,t,i){function s(e){var t,i,s;if(T("mouseEnabled")&&(E.dispatchEvent("mousemove",sigma.utils.mouseCoords(e)),p))return y=!0,x=!0,b&&clearTimeout(b),b=setTimeout(function(){y=!1},T("dragTimeout")),sigma.misc.animation.killAll(A),A.isMoving=!0,s=A.cameraPosition(sigma.utils.getX(e)-f,sigma.utils.getY(e)-m,!0),t=h-s.x,i=g-s.y,t===A.x&&i===A.y||(u=A.x,c=A.y,A.goTo({x:t,y:i})),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function r(e){if(T("mouseEnabled")&&p){p=!1,b&&clearTimeout(b),A.isMoving=!1;var t=sigma.utils.getX(e),i=sigma.utils.getY(e);y?(sigma.misc.animation.killAll(A),sigma.misc.animation.camera(A,{x:A.x+T("mouseInertiaRatio")*(A.x-u),y:A.y+T("mouseInertiaRatio")*(A.y-c)},{easing:"quadraticOut",duration:T("mouseInertiaDuration")})):f===t&&m===i||A.goTo({x:A.x,y:A.y}),E.dispatchEvent("mouseup",sigma.utils.mouseCoords(e)),y=!1}}function o(e){if(T("mouseEnabled"))switch(h=A.x,g=A.y,u=A.x,c=A.y,f=sigma.utils.getX(e),m=sigma.utils.getY(e),x=!1,v=(new Date).getTime(),e.which){case 2:break;case 3:E.dispatchEvent("rightclick",sigma.utils.mouseCoords(e,f,m));break;default:p=!0,E.dispatchEvent("mousedown",sigma.utils.mouseCoords(e,f,m))}}function n(e){T("mouseEnabled")&&E.dispatchEvent("mouseout")}function a(e){if(T("mouseEnabled")){var t=sigma.utils.mouseCoords(e);t.isDragging=(new Date).getTime()-v>100&&x,E.dispatchEvent("click",t)}return e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function d(e){var t,i,s;if(T("mouseEnabled"))return i=1/T("doubleClickZoomingRatio"),E.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,f,m)),T("doubleClickEnabled")&&(t=A.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),s={duration:T("doubleClickZoomDuration")},sigma.utils.zoomTo(A,t.x,t.y,i,s)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function l(e){var t,i,s,r=sigma.utils.getDelta(e);if(T("mouseEnabled")&&T("mouseWheelEnabled")&&0!==r)return i=r>0?1/T("zoomingRatio"):T("zoomingRatio"),t=A.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),s={duration:T("mouseZoomDuration")},sigma.utils.zoomTo(A,t.x,t.y,i,s),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}var h,g,u,c,f,m,p,y,x,v,b,E=this,w=e,A=t,T=i;sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(w,"click",d),w.addEventListener("DOMMouseScroll",l,!1),w.addEventListener("mousewheel",l,!1),w.addEventListener("mousemove",s,!1),w.addEventListener("mousedown",o,!1),w.addEventListener("click",a,!1),w.addEventListener("mouseout",n,!1),document.addEventListener("mouseup",r,!1),this.kill=function(){sigma.utils.unbindDoubleClick(w,"click"),w.removeEventListener("DOMMouseScroll",l),w.removeEventListener("mousewheel",l),w.removeEventListener("mousemove",s),w.removeEventListener("mousedown",o),w.removeEventListener("click",a),w.removeEventListener("mouseout",n),document.removeEventListener("mouseup",r)}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.touch=function(e,t,i){function s(e){var t=sigma.utils.getOffset(C);return{x:e.pageX-t.left,y:e.pageY-t.top}}function r(e){if(k("touchEnabled")){var t,i,r,o,n,a;switch(N=e.touches,N.length){case 1:M.isMoving=!0,w=1,d=M.x,l=M.y,u=M.x,c=M.y,n=s(N[0]),p=n.x,y=n.y;break;case 2:return M.isMoving=!0,w=2,n=s(N[0]),a=s(N[1]),t=n.x,r=n.y,i=a.x,o=a.y,u=M.x,c=M.y,h=M.angle,g=M.ratio,d=M.x,l=M.y,p=t,y=r,x=i,v=o,b=Math.atan2(v-y,x-p),E=Math.sqrt((v-y)*(v-y)+(x-p)*(x-p)),e.preventDefault(),!1}}}function o(e){if(k("touchEnabled")){N=e.touches;var t=k("touchInertiaRatio");switch(S&&(A=!1,clearTimeout(S)),w){case 2:if(1===e.touches.length){r(e),e.preventDefault();break}case 1:M.isMoving=!1,_.dispatchEvent("stopDrag"),A&&(T=!1,sigma.misc.animation.camera(M,{x:M.x+t*(M.x-u),y:M.y+t*(M.y-c)},{easing:"quadraticOut",duration:k("touchInertiaDuration")})),A=!1,w=0}}}function n(e){if(!T&&k("touchEnabled")){var t,i,r,o,n,a,C,P,L,O,R,I,z,F,B,j,D;switch(N=e.touches,A=!0,S&&clearTimeout(S),S=setTimeout(function(){A=!1},k("dragTimeout")),w){case 1:P=s(N[0]),t=P.x,r=P.y,O=M.cameraPosition(t-p,r-y,!0),F=d-O.x,B=l-O.y,F===M.x&&B===M.y||(u=M.x,c=M.y,M.goTo({x:F,y:B}),_.dispatchEvent("mousemove",sigma.utils.mouseCoords(e,P.x,P.y)),_.dispatchEvent("drag"));break;case 2:P=s(N[0]),L=s(N[1]),t=P.x,r=P.y,i=L.x,o=L.y,R=M.cameraPosition((p+x)/2-sigma.utils.getCenter(e).x,(y+v)/2-sigma.utils.getCenter(e).y,!0),C=M.cameraPosition((t+i)/2-sigma.utils.getCenter(e).x,(r+o)/2-sigma.utils.getCenter(e).y,!0),I=Math.atan2(o-r,i-t)-b,z=Math.sqrt((o-r)*(o-r)+(i-t)*(i-t))/E,t=R.x,r=R.y,j=g/z,t*=z,r*=z,D=h-I,n=Math.cos(-I),a=Math.sin(-I),i=t*n+r*a,o=r*n-t*a,t=i,r=o,F=t-C.x+d,B=r-C.y+l,j===M.ratio&&D===M.angle&&F===M.x&&B===M.y||(u=M.x,c=M.y,f=M.angle,m=M.ratio,M.goTo({x:F,y:B,angle:D,ratio:j}),_.dispatchEvent("drag"))}return e.preventDefault(),!1}}function a(e){var t,i,r;if(e.touches&&1===e.touches.length&&k("touchEnabled"))return T=!0,i=1/k("doubleClickZoomingRatio"),t=s(e.touches[0]),_.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,t.x,t.y)),k("doubleClickEnabled")&&(t=M.cameraPosition(t.x-sigma.utils.getCenter(e).x,t.y-sigma.utils.getCenter(e).y,!0),r={duration:k("doubleClickZoomDuration"),onComplete:function(){T=!1}},sigma.utils.zoomTo(M,t.x,t.y,i,r)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}var d,l,h,g,u,c,f,m,p,y,x,v,b,E,w,A,T,S,_=this,C=e,M=t,k=i,N=[];sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(C,"touchstart",a),C.addEventListener("touchstart",r,!1),C.addEventListener("touchend",o,!1),C.addEventListener("touchcancel",o,!1),C.addEventListener("touchleave",o,!1),C.addEventListener("touchmove",n,!1),this.kill=function(){sigma.utils.unbindDoubleClick(C,"touchstart"),C.addEventListener("touchstart",r),C.addEventListener("touchend",o),C.addEventListener("touchcancel",o),C.addEventListener("touchleave",o),C.addEventListener("touchmove",n)}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.canvas=function(e,t,i,s){if("object"!=typeof s)throw"sigma.renderers.canvas: Wrong arguments.";if(!(s.container instanceof HTMLElement))throw"Container not found.";var r,o,n,a;for(sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=s,this.container=this.options.container,this.settings="object"==typeof s.settings&&s.settings?i.embedObjects(s.settings):i,this.nodesOnScreen=[],this.edgesOnScreen=[],this.jobs={},this.options.prefix="renderer"+this.conradId+":",this.settings("batchEdgesDrawing")?(this.initDOM("canvas","edges"),this.initDOM("canvas","scene"),this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene):(this.initDOM("canvas","scene"),this.contexts.edges=this.contexts.scene,this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],n=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],r=0,o=n.length;r<o;r++)a="function"==typeof n[r]?n[r]:sigma.captors[n[r]],this.captors.push(new a(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.options.prefix),sigma.misc.drawHovers.call(this,this.options.prefix),this.resize(!1)},sigma.renderers.canvas.prototype.render=function(t){t=t||{};var i,s,r,o,n,a,d,l,h,g,u,c,f,m={},p=this.graph,y=this.graph.nodes,x=(this.options.prefix,this.settings(t,"drawEdges")),v=this.settings(t,"drawNodes"),b=this.settings(t,"drawLabels"),E=this.settings(t,"drawEdgeLabels"),w=this.settings.embedObjects(t,{prefix:this.options.prefix});this.resize(!1),this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(x=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.clear();for(r in this.jobs)conrad.hasJob(r)&&conrad.killJob(r);for(this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),i=this.nodesOnScreen,s=0,o=i.length;s<o;s++)m[i[s].id]=i[s];if(x){for(i=p.edges(),s=0,o=i.length;s<o;s++)n=i[s],!m[n.source]&&!m[n.target]||n.hidden||y(n.source).hidden||y(n.target).hidden||this.edgesOnScreen.push(n);if(this.settings(t,"batchEdgesDrawing"))a="edges_"+this.conradId,c=w("canvasEdgesBatchSize"),g=this.edgesOnScreen,o=g.length,h=0,d=Math.min(g.length,h+c),l=function(){for(f=this.contexts.edges.globalCompositeOperation,this.contexts.edges.globalCompositeOperation="destination-over",u=sigma.canvas.edges,s=h;s<d;s++)n=g[s],(u[n.type||this.settings(t,"defaultEdgeType")]||u.def)(n,p.nodes(n.source),p.nodes(n.target),this.contexts.edges,w);if(E)for(u=sigma.canvas.edges.labels,s=h;s<d;s++)n=g[s],n.hidden||(u[n.type||this.settings(t,"defaultEdgeType")]||u.def)(n,p.nodes(n.source),p.nodes(n.target),this.contexts.labels,w);return this.contexts.edges.globalCompositeOperation=f,d===g.length?(delete this.jobs[a],!1):(h=d+1,d=Math.min(g.length,h+c),!0)},this.jobs[a]=l,conrad.addJob(a,l.bind(this));else{for(u=sigma.canvas.edges,i=this.edgesOnScreen,s=0,o=i.length;s<o;s++)n=i[s],(u[n.type||this.settings(t,"defaultEdgeType")]||u.def)(n,p.nodes(n.source),p.nodes(n.target),this.contexts.edges,w);if(E)for(u=sigma.canvas.edges.labels,i=this.edgesOnScreen,s=0,o=i.length;s<o;s++)i[s].hidden||(u[i[s].type||this.settings(t,"defaultEdgeType")]||u.def)(i[s],p.nodes(i[s].source),p.nodes(i[s].target),this.contexts.labels,w)}}if(v)for(u=sigma.canvas.nodes,i=this.nodesOnScreen,s=0,o=i.length;s<o;s++)i[s].hidden||(u[i[s].type||this.settings(t,"defaultNodeType")]||u.def)(i[s],this.contexts.nodes,w);if(b)for(u=sigma.canvas.labels,i=this.nodesOnScreen,s=0,o=i.length;s<o;s++)i[s].hidden||(u[i[s].type||this.settings(t,"defaultNodeType")]||u.def)(i[s],this.contexts.labels,w);return this.dispatchEvent("render"),this},sigma.renderers.canvas.prototype.initDOM=function(e,t){var i=document.createElement(e);i.style.position="absolute",i.setAttribute("class","sigma-"+t),this.domElements[t]=i,this.container.appendChild(i),"canvas"===e.toLowerCase()&&(this.contexts[t]=i.getContext("2d"))},sigma.renderers.canvas.prototype.resize=function(t,i){var s,r=this.width,o=this.height,n=sigma.utils.getPixelRatio();if(t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),r!==this.width||o!==this.height)for(s in this.domElements)this.domElements[s].style.width=t+"px",this.domElements[s].style.height=i+"px","canvas"===this.domElements[s].tagName.toLowerCase()&&(this.domElements[s].setAttribute("width",t*n+"px"),this.domElements[s].setAttribute("height",i*n+"px"),1!==n&&this.contexts[s].scale(n,n));return this},sigma.renderers.canvas.prototype.clear=function(){for(var e in this.contexts)this.contexts[e].clearRect(0,0,this.width,this.height);return this},sigma.renderers.canvas.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.canvas.nodes"),sigma.utils.pkg("sigma.canvas.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.webgl=function(e,t,i,s){if("object"!=typeof s)throw"sigma.renderers.webgl: Wrong arguments.";if(!(s.container instanceof HTMLElement))throw"Container not found.";var r,o,n,a;for(sigma.classes.dispatcher.extend(this),this.jobs={},Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=s,this.container=this.options.container,this.settings="object"==typeof s.settings&&s.settings?i.embedObjects(s.settings):i,this.options.prefix=this.camera.readPrefix,Object.defineProperty(this,"nodePrograms",{value:{}}),Object.defineProperty(this,"edgePrograms",{value:{}}),Object.defineProperty(this,"nodeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeIndicesArrays",{value:{}}),this.settings(s,"batchEdgesDrawing")?(this.initDOM("canvas","edges",!0),this.initDOM("canvas","nodes",!0)):(this.initDOM("canvas","scene",!0),this.contexts.nodes=this.contexts.scene,this.contexts.edges=this.contexts.scene),this.initDOM("canvas","labels"),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],n=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],r=0,o=n.length;r<o;r++)a="function"==typeof n[r]?n[r]:sigma.captors[n[r]],this.captors.push(new a(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.camera.prefix),sigma.misc.drawHovers.call(this,this.camera.prefix),this.resize()},sigma.renderers.webgl.prototype.process=function(){var e,t,i,s,r,o,n=this.graph,a=sigma.utils.extend(a,this.options),d=this.settings(a,"defaultEdgeType"),l=this.settings(a,"defaultNodeType");for(s in this.nodeFloatArrays)delete this.nodeFloatArrays[s];for(s in this.edgeFloatArrays)delete this.edgeFloatArrays[s];for(s in this.edgeIndicesArrays)delete this.edgeIndicesArrays[s];for(e=n.edges(),t=0,i=e.length;t<i;t++)r=e[t].type||d,s=r&&sigma.webgl.edges[r]?r:"def",this.edgeFloatArrays[s]||(this.edgeFloatArrays[s]={edges:[]}),this.edgeFloatArrays[s].edges.push(e[t]);for(e=n.nodes(),t=0,i=e.length;t<i;t++)r=e[t].type||l,s=r&&sigma.webgl.nodes[r]?r:"def",this.nodeFloatArrays[s]||(this.nodeFloatArrays[s]={nodes:[]}),this.nodeFloatArrays[s].nodes.push(e[t]);for(s in this.edgeFloatArrays){for(o=sigma.webgl.edges[s],e=this.edgeFloatArrays[s].edges,this.edgeFloatArrays[s].array=new Float32Array(e.length*o.POINTS*o.ATTRIBUTES),t=0,i=e.length;t<i;t++)e[t].hidden||n.nodes(e[t].source).hidden||n.nodes(e[t].target).hidden||o.addEdge(e[t],n.nodes(e[t].source),n.nodes(e[t].target),this.edgeFloatArrays[s].array,t*o.POINTS*o.ATTRIBUTES,a.prefix,this.settings);"function"==typeof o.computeIndices&&(this.edgeIndicesArrays[s]=o.computeIndices(this.edgeFloatArrays[s].array))}for(s in this.nodeFloatArrays)for(o=sigma.webgl.nodes[s],e=this.nodeFloatArrays[s].nodes,this.nodeFloatArrays[s].array=new Float32Array(e.length*o.POINTS*o.ATTRIBUTES),t=0,i=e.length;t<i;t++)this.nodeFloatArrays[s].array||(this.nodeFloatArrays[s].array=new Float32Array(e.length*o.POINTS*o.ATTRIBUTES)),e[t].hidden||o.addNode(e[t],this.nodeFloatArrays[s].array,t*o.POINTS*o.ATTRIBUTES,a.prefix,this.settings);return this},sigma.renderers.webgl.prototype.render=function(t){var i,s,r,o,n,a,d=this,l=(this.graph,this.contexts.nodes),h=this.contexts.edges,g=this.camera.getMatrix(),u=sigma.utils.extend(t,this.options),c=this.settings(u,"drawLabels"),f=this.settings(u,"drawEdges"),m=this.settings(u,"drawNodes");this.resize(!1),this.settings(u,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(f=!1),this.clear(),g=sigma.utils.matrices.multiply(g,sigma.utils.matrices.translation(this.width/2,this.height/2));for(o in this.jobs)conrad.hasJob(o)&&conrad.killJob(o);if(f)if(this.settings(u,"batchEdgesDrawing"))(function(){var e,t,i,s,r,o,n,a,d,l;i="edges_"+this.conradId,l=this.settings(u,"webglEdgesBatchSize"),e=Object.keys(this.edgeFloatArrays),e.length&&(t=0,d=sigma.webgl.edges[e[t]],r=this.edgeFloatArrays[e[t]].array,a=this.edgeIndicesArrays[e[t]],n=0,o=Math.min(n+l*d.POINTS,r.length/d.ATTRIBUTES),s=function(){return this.edgePrograms[e[t]]||(this.edgePrograms[e[t]]=d.initProgram(h)),n<o&&(h.useProgram(this.edgePrograms[e[t]]),d.render(h,this.edgePrograms[e[t]],r,{settings:this.settings,matrix:g,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(u,"webglOversamplingRatio"),start:n,count:o-n,indicesData:a})),o>=r.length/d.ATTRIBUTES&&t===e.length-1?(delete this.jobs[i],!1):(o>=r.length/d.ATTRIBUTES?(t++,r=this.edgeFloatArrays[e[t]].array,d=sigma.webgl.edges[e[t]],n=0,o=Math.min(n+l*d.POINTS,r.length/d.ATTRIBUTES)):(n=o,o=Math.min(n+l*d.POINTS,r.length/d.ATTRIBUTES)),!0)},this.jobs[i]=s,conrad.addJob(i,s.bind(this)))}).call(this);else for(o in this.edgeFloatArrays)a=sigma.webgl.edges[o],this.edgePrograms[o]||(this.edgePrograms[o]=a.initProgram(h)),this.edgeFloatArrays[o]&&(h.useProgram(this.edgePrograms[o]),a.render(h,this.edgePrograms[o],this.edgeFloatArrays[o].array,{settings:this.settings,matrix:g,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(u,"webglOversamplingRatio"),indicesData:this.edgeIndicesArrays[o]}))
;if(m){l.blendFunc(l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA),l.enable(l.BLEND);for(o in this.nodeFloatArrays)a=sigma.webgl.nodes[o],this.nodePrograms[o]||(this.nodePrograms[o]=a.initProgram(l)),this.nodeFloatArrays[o]&&(l.useProgram(this.nodePrograms[o]),a.render(l,this.nodePrograms[o],this.nodeFloatArrays[o].array,{settings:this.settings,matrix:g,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(u,"webglOversamplingRatio")}))}if(c)for(i=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),this.camera.applyView(e,e,{nodes:i,edges:[],width:this.width,height:this.height}),n=function(e){return d.settings({prefix:d.camera.prefix},e)},s=0,r=i.length;s<r;s++)i[s].hidden||(sigma.canvas.labels[i[s].type||this.settings(u,"defaultNodeType")]||sigma.canvas.labels.def)(i[s],this.contexts.labels,n);return this.dispatchEvent("render"),this},sigma.renderers.webgl.prototype.initDOM=function(e,t,i){var s=document.createElement(e),r=this;s.style.position="absolute",s.setAttribute("class","sigma-"+t),this.domElements[t]=s,this.container.appendChild(s),"canvas"===e.toLowerCase()&&(this.contexts[t]=s.getContext(i?"experimental-webgl":"2d",{preserveDrawingBuffer:!0}),i&&(s.addEventListener("webglcontextlost",function(e){e.preventDefault()},!1),s.addEventListener("webglcontextrestored",function(e){r.render()},!1)))},sigma.renderers.webgl.prototype.resize=function(t,i){var s,r=this.width,o=this.height,n=sigma.utils.getPixelRatio();if(t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),r!==this.width||o!==this.height)for(s in this.domElements)this.domElements[s].style.width=t+"px",this.domElements[s].style.height=i+"px","canvas"===this.domElements[s].tagName.toLowerCase()&&(this.contexts[s]&&this.contexts[s].scale?(this.domElements[s].setAttribute("width",t*n+"px"),this.domElements[s].setAttribute("height",i*n+"px"),1!==n&&this.contexts[s].scale(n,n)):(this.domElements[s].setAttribute("width",t*this.settings("webglOversamplingRatio")+"px"),this.domElements[s].setAttribute("height",i*this.settings("webglOversamplingRatio")+"px")));for(s in this.contexts)this.contexts[s]&&this.contexts[s].viewport&&this.contexts[s].viewport(0,0,this.width*this.settings("webglOversamplingRatio"),this.height*this.settings("webglOversamplingRatio"));return this},sigma.renderers.webgl.prototype.clear=function(){return this.contexts.labels.clearRect(0,0,this.width,this.height),this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT),this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT),this},sigma.renderers.webgl.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.webgl.nodes"),sigma.utils.pkg("sigma.webgl.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.svg=function(e,t,i,s){if("object"!=typeof s)throw"sigma.renderers.svg: Wrong arguments.";if(!(s.container instanceof HTMLElement))throw"Container not found.";var r,o,n,a,d=this;for(sigma.classes.dispatcher.extend(this),this.graph=e,this.camera=t,this.domElements={graph:null,groups:{},nodes:{},edges:{},labels:{},hovers:{}},this.measurementCanvas=null,this.options=s,this.container=this.options.container,this.settings="object"==typeof s.settings&&s.settings?i.embedObjects(s.settings):i,this.settings("freeStyle",!!this.options.freeStyle),this.settings("xmlns","http://www.w3.org/2000/svg"),this.nodesOnScreen=[],this.edgesOnScreen=[],this.options.prefix="renderer"+sigma.utils.id()+":",this.initDOM("svg"),this.captors=[],n=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],r=0,o=n.length;r<o;r++)a="function"==typeof n[r]?n[r]:sigma.captors[n[r]],this.captors.push(new a(this.domElements.graph,this.camera,this.settings));window.addEventListener("resize",function(){d.resize()}),sigma.misc.bindDOMEvents.call(this,this.domElements.graph),this.bindHovers(this.options.prefix),this.resize(!1)},sigma.renderers.svg.prototype.render=function(t){t=t||{};var i,s,r,o,n,a,d,l,h,g={},u=this.graph,c=this.graph.nodes,f=(this.options.prefix,this.settings(t,"drawEdges")),m=this.settings(t,"drawNodes"),p=(this.settings(t,"drawLabels"),this.settings.embedObjects(t,{prefix:this.options.prefix,forceLabels:this.options.forceLabels}));for(this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(f=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.hideDOMElements(this.domElements.nodes),this.hideDOMElements(this.domElements.edges),this.hideDOMElements(this.domElements.labels),this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),i=this.nodesOnScreen,s=0,o=i.length;s<o;s++)g[i[s].id]=i[s];for(i=u.edges(),s=0,o=i.length;s<o;s++)n=i[s],!g[n.source]&&!g[n.target]||n.hidden||c(n.source).hidden||c(n.target).hidden||this.edgesOnScreen.push(n);if(l=sigma.svg.nodes,h=sigma.svg.labels,m)for(i=this.nodesOnScreen,s=0,o=i.length;s<o;s++)i[s].hidden||this.domElements.nodes[i[s].id]||(r=(l[i[s].type]||l.def).create(i[s],p),this.domElements.nodes[i[s].id]=r,this.domElements.groups.nodes.appendChild(r),r=(h[i[s].type]||h.def).create(i[s],p),this.domElements.labels[i[s].id]=r,this.domElements.groups.labels.appendChild(r));if(m)for(i=this.nodesOnScreen,s=0,o=i.length;s<o;s++)i[s].hidden||((l[i[s].type]||l.def).update(i[s],this.domElements.nodes[i[s].id],p),(h[i[s].type]||h.def).update(i[s],this.domElements.labels[i[s].id],p));if(l=sigma.svg.edges,f)for(i=this.edgesOnScreen,s=0,o=i.length;s<o;s++)this.domElements.edges[i[s].id]||(a=c(i[s].source),d=c(i[s].target),r=(l[i[s].type]||l.def).create(i[s],a,d,p),this.domElements.edges[i[s].id]=r,this.domElements.groups.edges.appendChild(r));if(f)for(i=this.edgesOnScreen,s=0,o=i.length;s<o;s++)a=c(i[s].source),d=c(i[s].target),(l[i[s].type]||l.def).update(i[s],this.domElements.edges[i[s].id],a,d,p);return this.dispatchEvent("render"),this},sigma.renderers.svg.prototype.initDOM=function(e){var t,i,s,r=document.createElementNS(this.settings("xmlns"),e),o=this.settings("classPrefix");r.style.position="absolute",r.setAttribute("class",o+"-svg"),r.setAttribute("xmlns",this.settings("xmlns")),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("version","1.1");var n=document.createElement("canvas");n.setAttribute("class",o+"-measurement-canvas"),this.domElements.graph=this.container.appendChild(r);var a=["edges","nodes","labels","hovers"];for(s=0,i=a.length;s<i;s++)t=document.createElementNS(this.settings("xmlns"),"g"),t.setAttributeNS(null,"id",o+"-group-"+a[s]),t.setAttributeNS(null,"class",o+"-group"),this.domElements.groups[a[s]]=this.domElements.graph.appendChild(t);this.container.appendChild(n),this.measurementCanvas=n.getContext("2d")},sigma.renderers.svg.prototype.hideDOMElements=function(e){var t,i;for(i in e)t=e[i],sigma.svg.utils.hide(t);return this},sigma.renderers.svg.prototype.bindHovers=function(e){function t(t){var i=t.data.node,s=n.settings.embedObjects({prefix:e});if(s("enableHovering")){var a=(o[i.type]||o.def).create(i,n.domElements.nodes[i.id],n.measurementCanvas,s);n.domElements.hovers[i.id]=a,n.domElements.groups.hovers.appendChild(a),r=i}}function i(t){var i=t.data.node;n.settings.embedObjects({prefix:e})("enableHovering")&&(n.domElements.groups.hovers.removeChild(n.domElements.hovers[i.id]),r=null,delete n.domElements.hovers[i.id],n.domElements.groups.nodes.appendChild(n.domElements.nodes[i.id]))}function s(){if(r){var t=n.settings.embedObjects({prefix:e});n.domElements.groups.hovers.removeChild(n.domElements.hovers[r.id]),delete n.domElements.hovers[r.id];var i=(o[r.type]||o.def).create(r,n.domElements.nodes[r.id],n.measurementCanvas,t);n.domElements.hovers[r.id]=i,n.domElements.groups.hovers.appendChild(i)}}var r,o=sigma.svg.hovers,n=this;this.bind("overNode",t),this.bind("outNode",i),this.bind("render",s)},sigma.renderers.svg.prototype.resize=function(t,i){var s=this.width,r=this.height;return t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),s===this.width&&r===this.height||(this.domElements.graph.style.width=t+"px",this.domElements.graph.style.height=i+"px","svg"===this.domElements.graph.tagName.toLowerCase()&&(this.domElements.graph.setAttribute("width",1*t),this.domElements.graph.setAttribute("height",1*i))),this},sigma.utils.pkg("sigma.svg.nodes"),sigma.utils.pkg("sigma.svg.edges"),sigma.utils.pkg("sigma.svg.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers");var t,i=!!e.WebGLRenderingContext;if(i){t=document.createElement("canvas");try{i=!(!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(e){i=!1}}sigma.renderers.def=i?sigma.renderers.webgl:sigma.renderers.canvas}(this),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.def={POINTS:3,ATTRIBUTES:5,addNode:function(e,t,i,s,r){var o=sigma.utils.floatColor(e.color||r("defaultNodeColor"));t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=o,t[i++]=0,t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=o,t[i++]=2*Math.PI/3,t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=o,t[i++]=4*Math.PI/3},render:function(e,t,i,s){var r,o=e.getAttribLocation(t,"a_position"),n=e.getAttribLocation(t,"a_size"),a=e.getAttribLocation(t,"a_color"),d=e.getAttribLocation(t,"a_angle"),l=e.getUniformLocation(t,"u_resolution"),h=e.getUniformLocation(t,"u_matrix"),g=e.getUniformLocation(t,"u_ratio"),u=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(l,s.width,s.height),e.uniform1f(g,1/Math.pow(s.ratio,s.settings("nodesPowRatio"))),e.uniform1f(u,s.scalingRatio),e.uniformMatrix3fv(h,!1,s.matrix),e.enableVertexAttribArray(o),e.enableVertexAttribArray(n),e.enableVertexAttribArray(a),e.enableVertexAttribArray(d),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.drawArrays(e.TRIANGLES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","attribute float a_angle;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","varying vec2 center;","varying float radius;","void main() {","radius = a_size * u_ratio;","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","center = position * u_scale;","center = vec2(center.x, u_scale * u_resolution.y - center.y);","position = position +","2.0 * radius * vec2(cos(a_angle), sin(a_angle));","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","radius = radius * u_scale;","gl_Position = vec4(position, 0, 1);","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","varying vec2 center;","varying float radius;","void main(void) {","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_FragCoord.xy - center;","float diff = radius - sqrt(m.x * m.x + m.y * m.y);","if (diff > 0.0)","gl_FragColor = color;","else","gl_FragColor = color0;","}"].join("\n"),e.FRAGMENT_SHADER),sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(e,t,i,s,r){t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=sigma.utils.floatColor(e.color||r("defaultNodeColor"))},render:function(e,t,i,s){var r,o=e.getAttribLocation(t,"a_position"),n=e.getAttribLocation(t,"a_size"),a=e.getAttribLocation(t,"a_color"),d=e.getUniformLocation(t,"u_resolution"),l=e.getUniformLocation(t,"u_matrix"),h=e.getUniformLocation(t,"u_ratio"),g=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(d,s.width,s.height),e.uniform1f(h,1/Math.pow(s.ratio,s.settings("nodesPowRatio"))),e.uniform1f(g,s.scalingRatio),e.uniformMatrix3fv(l,!1,s.matrix),e.enableVertexAttribArray(o),e.enableVertexAttribArray(n),e.enableVertexAttribArray(a),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.drawArrays(e.POINTS,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","float border = 0.01;","float radius = 0.5;","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_PointCoord - vec2(0.5, 0.5);","float dist = radius - sqrt(m.x * m.x + m.y * m.y);","float t = 0.0;","if (dist > border)","t = 1.0;","else if (dist > 0.0)","t = dist / border;","gl_FragColor = mix(color0, color, t);","}"].join("\n"),e.FRAGMENT_SHADER),sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(e,t,i,s,r,o,n){var a=(e[o+"size"]||1)/2,d=t[o+"x"],l=t[o+"y"],h=i[o+"x"],g=i[o+"y"],u=e.color;if(!u)switch(n("edgeColor")){case"source":u=t.color||n("defaultNodeColor");break;case"target":u=i.color||n("defaultNodeColor");break;default:u=n("defaultEdgeColor")}u=sigma.utils.floatColor(u),s[r++]=d,s[r++]=l,s[r++]=h,s[r++]=g,s[r++]=a,s[r++]=0,s[r++]=u,s[r++]=h,s[r++]=g,s[r++]=d,s[r++]=l,s[r++]=a,s[r++]=1,s[r++]=u,s[r++]=h,s[r++]=g,s[r++]=d,s[r++]=l,s[r++]=a,s[r++]=0,s[r++]=u,s[r++]=h,s[r++]=g,s[r++]=d,s[r++]=l,s[r++]=a,s[r++]=0,s[r++]=u,s[r++]=d,s[r++]=l,s[r++]=h,s[r++]=g,s[r++]=a,s[r++]=1,s[r++]=u,s[r++]=d,s[r++]=l,s[r++]=h,s[r++]=g,s[r++]=a,s[r++]=0,s[r++]=u},render:function(e,t,i,s){var r,o=e.getAttribLocation(t,"a_color"),n=e.getAttribLocation(t,"a_position1"),a=e.getAttribLocation(t,"a_position2"),d=e.getAttribLocation(t,"a_thickness"),l=e.getAttribLocation(t,"a_minus"),h=e.getUniformLocation(t,"u_resolution"),g=e.getUniformLocation(t,"u_matrix"),u=e.getUniformLocation(t,"u_matrixHalfPi"),c=e.getUniformLocation(t,"u_matrixHalfPiMinus"),f=e.getUniformLocation(t,"u_ratio"),m=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.uniform2f(h,s.width,s.height),e.uniform1f(f,s.ratio/Math.pow(s.ratio,s.settings("edgesPowRatio"))),e.uniform1f(m,s.scalingRatio),e.uniformMatrix3fv(g,!1,s.matrix),e.uniformMatrix2fv(u,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(c,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(o),e.enableVertexAttribArray(n),e.enableVertexAttribArray(a),e.enableVertexAttribArray(d),e.enableVertexAttribArray(l),e.vertexAttribPointer(n,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.drawArrays(e.TRIANGLES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i;return t=sigma.utils.loadShader(e,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_thickness;","attribute float a_minus;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 position = a_thickness * u_ratio *","normalize(a_position2 - a_position1);","mat2 matrix = a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi;","position = matrix * position + a_position1;","gl_Position = vec4(","((u_matrix * vec3(position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(e,t,i,s,r,o,n){var a=(e[o+"size"],t[o+"x"]),d=t[o+"y"],l=i[o+"x"],h=i[o+"y"],g=e.color;if(!g)switch(n("edgeColor")){case"source":g=t.color||n("defaultNodeColor");break;case"target":g=i.color||n("defaultNodeColor");break;default:g=n("defaultEdgeColor")}g=sigma.utils.floatColor(g),s[r++]=a,s[r++]=d,s[r++]=g,s[r++]=l,s[r++]=h,s[r++]=g},render:function(e,t,i,s){var r,o=e.getAttribLocation(t,"a_color"),n=e.getAttribLocation(t,"a_position"),a=e.getUniformLocation(t,"u_resolution"),d=e.getUniformLocation(t,"u_matrix");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(a,s.width,s.height),e.uniformMatrix3fv(d,!1,s.matrix),e.enableVertexAttribArray(n),e.enableVertexAttribArray(o),e.vertexAttribPointer(n,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.lineWidth(3),e.drawArrays(e.LINES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(e,t,i,s,r,o,n){var a=(e[o+"size"]||1)/2,d=t[o+"x"],l=t[o+"y"],h=i[o+"x"],g=i[o+"y"],u=i[o+"size"],c=e.color;if(!c)switch(n("edgeColor")){case"source":c=t.color||n("defaultNodeColor");break;case"target":c=i.color||n("defaultNodeColor");break;default:c=n("defaultEdgeColor")}c=sigma.utils.floatColor(c),s[r++]=d,s[r++]=l,s[r++]=h,s[r++]=g,s[r++]=a,s[r++]=u,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=c,s[r++]=h,s[r++]=g,s[r++]=d,s[r++]=l,s[r++]=a,s[r++]=u,s[r++]=1,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=c,s[r++]=h,s[r++]=g,s[r++]=d,s[r++]=l,s[r++]=a,s[r++]=u,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=c,s[r++]=h,s[r++]=g,s[r++]=d,s[r++]=l,s[r++]=a,s[r++]=u,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=c,s[r++]=d,s[r++]=l,s[r++]=h,s[r++]=g,s[r++]=a,s[r++]=u,s[r++]=0,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=c,s[r++]=d,s[r++]=l,s[r++]=h,s[r++]=g,s[r++]=a,s[r++]=u,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=c,s[r++]=h,s[r++]=g,s[r++]=d,s[r++]=l,s[r++]=a,s[r++]=u,s[r++]=1,s[r++]=0,s[r++]=1,s[r++]=-1,s[r++]=c,s[r++]=h,s[r++]=g,s[r++]=d,s[r++]=l,s[r++]=a,s[r++]=u,s[r++]=1,s[r++]=0,s[r++]=1,s[r++]=0,s[r++]=c,s[r++]=h,s[r++]=g,s[r++]=d,s[r++]=l,s[r++]=a,s[r++]=u,s[r++]=1,s[r++]=0,s[r++]=1,s[r++]=1,s[r++]=c},render:function(e,t,i,s){var r,o=e.getAttribLocation(t,"a_pos1"),n=e.getAttribLocation(t,"a_pos2"),a=e.getAttribLocation(t,"a_thickness"),d=e.getAttribLocation(t,"a_tSize"),l=e.getAttribLocation(t,"a_delay"),h=e.getAttribLocation(t,"a_minus"),g=e.getAttribLocation(t,"a_head"),u=e.getAttribLocation(t,"a_headPosition"),c=e.getAttribLocation(t,"a_color"),f=e.getUniformLocation(t,"u_resolution"),m=e.getUniformLocation(t,"u_matrix"),p=e.getUniformLocation(t,"u_matrixHalfPi"),y=e.getUniformLocation(t,"u_matrixHalfPiMinus"),x=e.getUniformLocation(t,"u_ratio"),v=e.getUniformLocation(t,"u_nodeRatio"),b=e.getUniformLocation(t,"u_arrowHead"),E=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.uniform2f(f,s.width,s.height),e.uniform1f(x,s.ratio/Math.pow(s.ratio,s.settings("edgesPowRatio"))),e.uniform1f(v,Math.pow(s.ratio,s.settings("nodesPowRatio"))/s.ratio),e.uniform1f(b,5),e.uniform1f(E,s.scalingRatio),e.uniformMatrix3fv(m,!1,s.matrix),e.uniformMatrix2fv(p,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(y,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(o),e.enableVertexAttribArray(n),e.enableVertexAttribArray(a),e.enableVertexAttribArray(d),e.enableVertexAttribArray(l),e.enableVertexAttribArray(h),e.enableVertexAttribArray(g),e.enableVertexAttribArray(u),e.enableVertexAttribArray(c),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(n,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.vertexAttribPointer(h,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28),e.vertexAttribPointer(g,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),e.vertexAttribPointer(c,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40),e.drawArrays(e.TRIANGLES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i;return t=sigma.utils.loadShader(e,["attribute vec2 a_pos1;","attribute vec2 a_pos2;","attribute float a_thickness;","attribute float a_tSize;","attribute float a_delay;","attribute float a_minus;","attribute float a_head;","attribute float a_headPosition;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_nodeRatio;","uniform float u_arrowHead;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 pos = normalize(a_pos2 - a_pos1);","mat2 matrix = (1.0 - a_head) *","(","a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi",") + a_head * (","a_headPosition * u_matrixHalfPiMinus * 0.6 +","(a_headPosition * a_headPosition - 1.0) * mat2(1.0)",");","pos = a_pos1 + (","(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +","a_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +","a_delay * pos * (","a_tSize / u_nodeRatio +","u_arrowHead * a_thickness * u_ratio",")",");","gl_Position = vec4(","((u_matrix * vec3(pos, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),sigma.utils.loadProgram(e,[t,i])}}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels"),sigma.canvas.labels.def=function(e,t,i){var s,r=i("prefix")||"",o=e[r+"size"];o<i("labelThreshold")||e.label&&"string"==typeof e.label&&(s="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*o,t.font=(i("fontStyle")?i("fontStyle")+" ":"")+s+"px "+i("font"),t.fillStyle="node"===i("labelColor")?e.color||i("defaultNodeColor"):i("defaultLabelColor"),t.fillText(e.label,Math.round(e[r+"x"]+o+3),Math.round(e[r+"y"]+s/3)))}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.hovers"),sigma.canvas.hovers.def=function(e,t,i){var s,r,o,n,a,d=i("hoverFontStyle")||i("fontStyle"),l=i("prefix")||"",h=e[l+"size"],g="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*h;t.font=(d?d+" ":"")+g+"px "+(i("hoverFont")||i("font")),t.beginPath(),t.fillStyle="node"===i("labelHoverBGColor")?e.color||i("defaultNodeColor"):i("defaultHoverLabelBGColor"),e.label&&i("labelHoverShadow")&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor=i("labelHoverShadowColor")),e.label&&"string"==typeof e.label&&(s=Math.round(e[l+"x"]-g/2-2),r=Math.round(e[l+"y"]-g/2-2),o=Math.round(t.measureText(e.label).width+g/2+h+7),n=Math.round(g+4),a=Math.round(g/2+2),t.moveTo(s,r+a),t.arcTo(s,r,s+a,r,a),t.lineTo(s+o,r),t.lineTo(s+o,r+n),t.lineTo(s+a,r+n),t.arcTo(s,r+n,s,r+n-a,a),t.lineTo(s,r+a),t.closePath(),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),i("borderSize")>0&&(t.beginPath(),t.fillStyle="node"===i("nodeBorderColor")?e.color||i("defaultNodeColor"):i("defaultNodeBorderColor"),t.arc(e[l+"x"],e[l+"y"],h+i("borderSize"),0,2*Math.PI,!0),t.closePath(),t.fill()),(sigma.canvas.nodes[e.type]||sigma.canvas.nodes.def)(e,t,i),e.label&&"string"==typeof e.label&&(t.fillStyle="node"===i("labelHoverColor")?e.color||i("defaultNodeColor"):i("defaultLabelHoverColor"),t.fillText(e.label,Math.round(e[l+"x"]+h+3),Math.round(e[l+"y"]+g/3)))}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes"),sigma.canvas.nodes.def=function(e,t,i){var s=i("prefix")||"";t.fillStyle=e.color||i("defaultNodeColor"),t.beginPath(),t.arc(e[s+"x"],e[s+"y"],e[s+"size"],0,2*Math.PI,!0),t.closePath(),t.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.def=function(e,t,i,s,r){var o=e.color,n=r("prefix")||"",a=e[n+"size"]||1,d=r("edgeColor"),l=r("defaultNodeColor"),h=r("defaultEdgeColor");if(!o)switch(d){case"source":o=t.color||l;break;case"target":o=i.color||l;break;default:o=h}s.strokeStyle=o,s.lineWidth=a,s.beginPath(),s.moveTo(t[n+"x"],t[n+"y"]),s.lineTo(i[n+"x"],i[n+"y"]),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.arrow=function(e,t,i,s,r){var o=e.color,n=r("prefix")||"",a=r("edgeColor"),d=r("defaultNodeColor"),l=r("defaultEdgeColor"),h=e[n+"size"]||1,g=i[n+"size"],u=t[n+"x"],c=t[n+"y"],f=i[n+"x"],m=i[n+"y"],p=Math.max(2.5*h,r("minArrowSize")),y=Math.sqrt(Math.pow(f-u,2)+Math.pow(m-c,2)),x=u+(f-u)*(y-p-g)/y,v=c+(m-c)*(y-p-g)/y,b=(f-u)*p/y,E=(m-c)*p/y;if(!o)switch(a){case"source":o=t.color||d;break;case"target":o=i.color||d;break;default:o=l}s.strokeStyle=o,s.lineWidth=h,s.beginPath(),s.moveTo(u,c),s.lineTo(x,v),s.stroke(),s.fillStyle=o,s.beginPath(),s.moveTo(x+b,v+E),s.lineTo(x+.6*E,v-.6*b),s.lineTo(x-.6*E,v+.6*b),s.lineTo(x+b,v+E),s.closePath(),s.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.def=function(e,t,i,s,r){var o=e.color,n=r("prefix")||"",a=e[n+"size"]||1,d=r("edgeColor"),l=r("defaultNodeColor"),h=r("defaultEdgeColor");if(!o)switch(d){case"source":o=t.color||l;break;case"target":o=i.color||l;break;default:o=h}o="edge"===r("edgeHoverColor")?e.hover_color||o:e.hover_color||r("defaultEdgeHoverColor")||o,a*=r("edgeHoverSizeRatio"),s.strokeStyle=o,s.lineWidth=a,s.beginPath(),s.moveTo(t[n+"x"],t[n+"y"]),s.lineTo(i[n+"x"],i[n+"y"]),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curve=function(e,t,i,s,r){var o=e.color,n=r("prefix")||"",a=r("edgeHoverSizeRatio")*(e[n+"size"]||1),d=r("edgeColor"),l=r("defaultNodeColor"),h=r("defaultEdgeColor"),g={},u=t[n+"size"],c=t[n+"x"],f=t[n+"y"],m=i[n+"x"],p=i[n+"y"];if(g=t.id===i.id?sigma.utils.getSelfLoopControlPoints(c,f,u):sigma.utils.getQuadraticControlPoint(c,f,m,p),!o)switch(d){case"source":o=t.color||l;break;case"target":o=i.color||l;break;default:o=h}o="edge"===r("edgeHoverColor")?e.hover_color||o:e.hover_color||r("defaultEdgeHoverColor")||o,s.strokeStyle=o,s.lineWidth=a,s.beginPath(),s.moveTo(c,f),t.id===i.id?s.bezierCurveTo(g.x1,g.y1,g.x2,g.y2,m,p):s.quadraticCurveTo(g.x,g.y,m,p),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.arrow=function(e,t,i,s,r){var o=e.color,n=r("prefix")||"",a=r("edgeColor"),d=r("defaultNodeColor"),l=r("defaultEdgeColor"),h=e[n+"size"]||1,g=i[n+"size"],u=t[n+"x"],c=t[n+"y"],f=i[n+"x"],m=i[n+"y"];h=e.hover?r("edgeHoverSizeRatio")*h:h;var p=2.5*h,y=Math.sqrt(Math.pow(f-u,2)+Math.pow(m-c,2)),x=u+(f-u)*(y-p-g)/y,v=c+(m-c)*(y-p-g)/y,b=(f-u)*p/y,E=(m-c)*p/y;if(!o)switch(a){case"source":o=t.color||d;break;case"target":o=i.color||d;break;default:o=l}o="edge"===r("edgeHoverColor")?e.hover_color||o:e.hover_color||r("defaultEdgeHoverColor")||o,s.strokeStyle=o,s.lineWidth=h,s.beginPath(),s.moveTo(u,c),s.lineTo(x,v),s.stroke(),s.fillStyle=o,s.beginPath(),s.moveTo(x+b,v+E),s.lineTo(x+.6*E,v-.6*b),s.lineTo(x-.6*E,v+.6*b),s.lineTo(x+b,v+E),s.closePath(),s.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curvedArrow=function(e,t,i,s,r){var o,n,a,d,l,h,g=e.color,u=r("prefix")||"",c=r("edgeColor"),f=r("defaultNodeColor"),m=r("defaultEdgeColor"),p={},y=r("edgeHoverSizeRatio")*(e[u+"size"]||1),x=i[u+"size"],v=t[u+"x"],b=t[u+"y"],E=i[u+"x"],w=i[u+"y"];if(p=t.id===i.id?sigma.utils.getSelfLoopControlPoints(v,b,x):sigma.utils.getQuadraticControlPoint(v,b,E,w),t.id===i.id?(o=Math.sqrt(Math.pow(E-p.x1,2)+Math.pow(w-p.y1,2)),n=2.5*y,a=p.x1+(E-p.x1)*(o-n-x)/o,d=p.y1+(w-p.y1)*(o-n-x)/o,l=(E-p.x1)*n/o,h=(w-p.y1)*n/o):(o=Math.sqrt(Math.pow(E-p.x,2)+Math.pow(w-p.y,2)),n=2.5*y,a=p.x+(E-p.x)*(o-n-x)/o,d=p.y+(w-p.y)*(o-n-x)/o,l=(E-p.x)*n/o,h=(w-p.y)*n/o),!g)switch(c){case"source":g=t.color||f;break;case"target":g=i.color||f;break;default:g=m}g="edge"===r("edgeHoverColor")?e.hover_color||g:e.hover_color||r("defaultEdgeHoverColor")||g,s.strokeStyle=g,s.lineWidth=y,s.beginPath(),s.moveTo(v,b),
t.id===i.id?s.bezierCurveTo(p.x2,p.y2,p.x1,p.y1,a,d):s.quadraticCurveTo(p.x,p.y,a,d),s.stroke(),s.fillStyle=g,s.beginPath(),s.moveTo(a+l,d+h),s.lineTo(a+.6*h,d-.6*l),s.lineTo(a-.6*h,d+.6*l),s.lineTo(a+l,d+h),s.closePath(),s.fill()}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.extremities"),sigma.canvas.extremities.def=function(e,t,i,s,r){(sigma.canvas.hovers[t.type]||sigma.canvas.hovers.def)(t,s,r),(sigma.canvas.hovers[i.type]||sigma.canvas.hovers.def)(i,s,r)}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.svg.utils"),sigma.svg.utils={show:function(e){return e.style.display="",this},hide:function(e){return e.style.display="none",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.nodes"),sigma.svg.nodes.def={create:function(e,t){var i=(t("prefix"),document.createElementNS(t("xmlns"),"circle"));return i.setAttributeNS(null,"data-node-id",e.id),i.setAttributeNS(null,"class",t("classPrefix")+"-node"),i.setAttributeNS(null,"fill",e.color||t("defaultNodeColor")),i},update:function(e,t,i){var s=i("prefix")||"";return t.setAttributeNS(null,"cx",e[s+"x"]),t.setAttributeNS(null,"cy",e[s+"y"]),t.setAttributeNS(null,"r",e[s+"size"]),i("freeStyle")||t.setAttributeNS(null,"fill",e.color||i("defaultNodeColor")),t.style.display="",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.def={create:function(e,t,i,s){var r=e.color,o=(s("prefix"),s("edgeColor")),n=s("defaultNodeColor"),a=s("defaultEdgeColor");if(!r)switch(o){case"source":r=t.color||n;break;case"target":r=i.color||n;break;default:r=a}var d=document.createElementNS(s("xmlns"),"line");return d.setAttributeNS(null,"data-edge-id",e.id),d.setAttributeNS(null,"class",s("classPrefix")+"-edge"),d.setAttributeNS(null,"stroke",r),d},update:function(e,t,i,s,r){var o=r("prefix")||"";return t.setAttributeNS(null,"stroke-width",e[o+"size"]||1),t.setAttributeNS(null,"x1",i[o+"x"]),t.setAttributeNS(null,"y1",i[o+"y"]),t.setAttributeNS(null,"x2",s[o+"x"]),t.setAttributeNS(null,"y2",s[o+"y"]),t.style.display="",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.curve={create:function(e,t,i,s){var r=e.color,o=(s("prefix"),s("edgeColor")),n=s("defaultNodeColor"),a=s("defaultEdgeColor");if(!r)switch(o){case"source":r=t.color||n;break;case"target":r=i.color||n;break;default:r=a}var d=document.createElementNS(s("xmlns"),"path");return d.setAttributeNS(null,"data-edge-id",e.id),d.setAttributeNS(null,"class",s("classPrefix")+"-edge"),d.setAttributeNS(null,"stroke",r),d},update:function(e,t,i,s,r){var o=r("prefix")||"";t.setAttributeNS(null,"stroke-width",e[o+"size"]||1);var n=(i[o+"x"]+s[o+"x"])/2+(s[o+"y"]-i[o+"y"])/4,a=(i[o+"y"]+s[o+"y"])/2+(i[o+"x"]-s[o+"x"])/4,d="M"+i[o+"x"]+","+i[o+"y"]+" Q"+n+","+a+" "+s[o+"x"]+","+s[o+"y"];return t.setAttributeNS(null,"d",d),t.setAttributeNS(null,"fill","none"),t.style.display="",this}}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.labels"),sigma.svg.labels.def={create:function(e,t){var i=t("prefix")||"",s=e[i+"size"],r=document.createElementNS(t("xmlns"),"text"),o="fixed"===t("labelSize")?t("defaultLabelSize"):t("labelSizeRatio")*s,n="node"===t("labelColor")?e.color||t("defaultNodeColor"):t("defaultLabelColor");return r.setAttributeNS(null,"data-label-target",e.id),r.setAttributeNS(null,"class",t("classPrefix")+"-label"),r.setAttributeNS(null,"font-size",o),r.setAttributeNS(null,"font-family",t("font")),r.setAttributeNS(null,"fill",n),r.innerHTML=e.label,r.textContent=e.label,r},update:function(e,t,i){var s=i("prefix")||"",r=e[s+"size"],o="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*r;if((i("forceLabels")||!(r<i("labelThreshold")))&&"string"==typeof e.label)return t.setAttributeNS(null,"x",Math.round(e[s+"x"]+r+3)),t.setAttributeNS(null,"y",Math.round(e[s+"y"]+o/3)),t.style.display="",this}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.hovers"),sigma.svg.hovers.def={create:function(e,t,i,s){var r,o,n,a=(s("hoverFontStyle")||s("fontStyle"),s("prefix")||""),d=e[a+"size"],l="fixed"===s("labelSize")?s("defaultLabelSize"):s("labelSizeRatio")*d,h="node"===s("labelHoverColor")?e.color||s("defaultNodeColor"):s("defaultLabelHoverColor"),g=document.createElementNS(s("xmlns"),"g"),u=document.createElementNS(s("xmlns"),"rect"),c=document.createElementNS(s("xmlns"),"circle"),f=document.createElementNS(s("xmlns"),"text");return g.setAttributeNS(null,"class",s("classPrefix")+"-hover"),g.setAttributeNS(null,"data-node-id",e.id),"string"==typeof e.label&&(f.innerHTML=e.label,f.textContent=e.label,f.setAttributeNS(null,"class",s("classPrefix")+"-hover-label"),f.setAttributeNS(null,"font-size",l),f.setAttributeNS(null,"font-family",s("font")),f.setAttributeNS(null,"fill",h),f.setAttributeNS(null,"x",Math.round(e[a+"x"]+d+3)),f.setAttributeNS(null,"y",Math.round(e[a+"y"]+l/3)),Math.round(e[a+"x"]-l/2-2),Math.round(e[a+"y"]-l/2-2),r=Math.round(i.measureText(e.label).width+l/2+d+9),o=Math.round(l+4),n=Math.round(l/2+2),c.setAttributeNS(null,"class",s("classPrefix")+"-hover-area"),c.setAttributeNS(null,"fill","#fff"),c.setAttributeNS(null,"cx",e[a+"x"]),c.setAttributeNS(null,"cy",e[a+"y"]),c.setAttributeNS(null,"r",n),u.setAttributeNS(null,"class",s("classPrefix")+"-hover-area"),u.setAttributeNS(null,"fill","#fff"),u.setAttributeNS(null,"x",e[a+"x"]+n/4),u.setAttributeNS(null,"y",e[a+"y"]-n),u.setAttributeNS(null,"width",r),u.setAttributeNS(null,"height",o)),g.appendChild(c),g.appendChild(u),g.appendChild(f),g.appendChild(t),g}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.utils.pkg("sigma.utils"),sigma.middlewares.rescale=function(e,t,i){var s,r,o,n,a,d,l,h,g=this.graph.nodes(),u=this.graph.edges(),c=this.settings.embedObjects(i||{}),f=c("bounds")||sigma.utils.getBoundaries(this.graph,e,!0),m=f.minX,p=f.minY,y=f.maxX,x=f.maxY,v=f.sizeMax,b=f.weightMax,E=c("width")||1,w=c("height")||1,A=c("autoRescale"),T={nodePosition:1,nodeSize:1,edgeSize:1};for(A instanceof Array||(A=["nodePosition","nodeSize","edgeSize"]),s=0,r=A.length;s<r;s++)if(!T[A[s]])throw new Error('The rescale setting "'+A[s]+'" is not recognized.');var S=~A.indexOf("nodePosition"),_=~A.indexOf("nodeSize"),C=~A.indexOf("edgeSize");for(l="outside"===c("scalingMode")?Math.max(E/Math.max(y-m,1),w/Math.max(x-p,1)):Math.min(E/Math.max(y-m,1),w/Math.max(x-p,1)),h=(c("rescaleIgnoreSize")?0:(c("maxNodeSize")||v)/l)+(c("sideMargin")||0),y+=h,m-=h,x+=h,p-=h,l="outside"===c("scalingMode")?Math.max(E/Math.max(y-m,1),w/Math.max(x-p,1)):Math.min(E/Math.max(y-m,1),w/Math.max(x-p,1)),c("maxNodeSize")||c("minNodeSize")?c("maxNodeSize")===c("minNodeSize")?(o=0,n=+c("maxNodeSize")):(o=(c("maxNodeSize")-c("minNodeSize"))/v,n=+c("minNodeSize")):(o=1,n=0),c("maxEdgeSize")||c("minEdgeSize")?c("maxEdgeSize")===c("minEdgeSize")?(a=0,d=+c("minEdgeSize")):(a=(c("maxEdgeSize")-c("minEdgeSize"))/b,d=+c("minEdgeSize")):(a=1,d=0),s=0,r=u.length;s<r;s++)u[s][t+"size"]=u[s][e+"size"]*(C?a:1)+(C?d:0);for(s=0,r=g.length;s<r;s++)g[s][t+"size"]=g[s][e+"size"]*(_?o:1)+(_?n:0),g[s][t+"x"]=(g[s][e+"x"]-(y+m)/2)*(S?l:1),g[s][t+"y"]=(g[s][e+"y"]-(x+p)/2)*(S?l:1)},sigma.utils.getBoundaries=function(e,t,i){var s,r,o=e.edges(),n=e.nodes(),a=-1/0,d=-1/0,l=1/0,h=1/0,g=-1/0,u=-1/0;if(i)for(s=0,r=o.length;s<r;s++)a=Math.max(o[s][t+"size"],a);for(s=0,r=n.length;s<r;s++)d=Math.max(n[s][t+"size"],d),g=Math.max(n[s][t+"x"],g),l=Math.min(n[s][t+"x"],l),u=Math.max(n[s][t+"y"],u),h=Math.min(n[s][t+"y"],h);return a=a||1,d=d||1,{weightMax:a,sizeMax:d,minX:l,minY:h,maxX:g,maxY:u}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.middlewares.copy=function(e,t){var i,s,r;if(t+""!=e+""){for(r=this.graph.nodes(),i=0,s=r.length;i<s;i++)r[i][t+"x"]=r[i][e+"x"],r[i][t+"y"]=r[i][e+"y"],r[i][t+"size"]=r[i][e+"size"];for(r=this.graph.edges(),i=0,s=r.length;i<s;i++)r[i][t+"size"]=r[i][e+"size"]}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc.animation.running");var t=function(){var e=0;return function(){return""+ ++e}}();sigma.misc.animation.camera=function(i,s,r){if(!(i instanceof sigma.classes.camera&&"object"==typeof s&&s))throw"animation.camera: Wrong arguments.";if("number"!=typeof s.x&&"number"!=typeof s.y&&"number"!=typeof s.ratio&&"number"!=typeof s.angle)throw"There must be at least one valid coordinate in the given val.";var o,n,a,d,l,h=r||{},g=sigma.utils.dateNow();return l={x:i.x,y:i.y,ratio:i.ratio,angle:i.angle},h.duration,d="function"!=typeof h.easing?sigma.utils.easings[h.easing||"quadraticInOut"]:h.easing,o=function(){var t,r=h.duration?(sigma.utils.dateNow()-g)/h.duration:1;r>=1?(i.isAnimated=!1,i.goTo({x:s.x!==e?s.x:l.x,y:s.y!==e?s.y:l.y,ratio:s.ratio!==e?s.ratio:l.ratio,angle:s.angle!==e?s.angle:l.angle}),cancelAnimationFrame(n),delete sigma.misc.animation.running[n],"function"==typeof h.onComplete&&h.onComplete()):(t=d(r),i.isAnimated=!0,i.goTo({x:s.x!==e?l.x+(s.x-l.x)*t:l.x,y:s.y!==e?l.y+(s.y-l.y)*t:l.y,ratio:s.ratio!==e?l.ratio+(s.ratio-l.ratio)*t:l.ratio,angle:s.angle!==e?l.angle+(s.angle-l.angle)*t:l.angle}),"function"==typeof h.onNewFrame&&h.onNewFrame(),a.frameId=requestAnimationFrame(o))},n=t(),a={frameId:requestAnimationFrame(o),target:i,type:"camera",options:h,fn:o},sigma.misc.animation.running[n]=a,n},sigma.misc.animation.kill=function(e){if(1!==arguments.length||"number"!=typeof e)throw"animation.kill: Wrong arguments.";var t=sigma.misc.animation.running[e];return t&&(cancelAnimationFrame(e),delete sigma.misc.animation.running[t.frameId],"camera"===t.type&&(t.target.isAnimated=!1),"function"==typeof(t.options||{}).onComplete&&t.options.onComplete()),this},sigma.misc.animation.killAll=function(e){var t,i,s=0,r="string"==typeof e?e:null,o="object"==typeof e?e:null,n=sigma.misc.animation.running;for(i in n)r&&n[i].type!==r||o&&n[i].target!==o||(t=sigma.misc.animation.running[i],cancelAnimationFrame(t.frameId),delete sigma.misc.animation.running[i],"camera"===t.type&&(t.target.isAnimated=!1),s++,"function"==typeof(t.options||{}).onComplete&&t.options.onComplete());return s},sigma.misc.animation.has=function(e){var t,i="string"==typeof e?e:null,s="object"==typeof e?e:null,r=sigma.misc.animation.running;for(t in r)if(!(i&&r[t].type!==i||s&&r[t].target!==s))return!0;return!1}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindEvents=function(t){function i(e){e&&(n="x"in e.data?e.data.x:n,a="y"in e.data?e.data.y:a);var i,s,r,o,l,h,g,u,c=[],f=n+d.width/2,m=a+d.height/2,p=d.camera.cameraPosition(n,a),y=d.camera.quadtree.point(p.x,p.y);if(y.length)for(i=0,r=y.length;i<r;i++)if(o=y[i],l=o[t+"x"],h=o[t+"y"],g=o[t+"size"],!o.hidden&&f>l-g&&f<l+g&&m>h-g&&m<h+g&&Math.sqrt(Math.pow(f-l,2)+Math.pow(m-h,2))<g){for(u=!1,s=0;s<c.length;s++)if(o.size>c[s].size){c.splice(s,0,o),u=!0;break}u||c.push(o)}return c}function s(i){function s(e,t){for(y=!1,l=0;l<e.length;l++)if(t.size>e[l].size){e.splice(l,0,t),y=!0;break}y||e.push(t)}if(!d.settings("enableEdgeHovering"))return[];var r=sigma.renderers.canvas&&d instanceof sigma.renderers.canvas;if(!r)throw new Error("The edge events feature is not compatible with the WebGL renderer");i&&(n="x"in i.data?i.data.x:n,a="y"in i.data?i.data.y:a);var o,l,h,g,u,c,f,m,p,y,x=d.settings("edgeHoverPrecision"),v={},b=[],E=n+d.width/2,w=a+d.height/2,A=d.camera.cameraPosition(n,a),T=[];if(r){var S=d.camera.quadtree.area(d.camera.getRectangle(d.width,d.height));for(g=S,o=0,h=g.length;o<h;o++)v[g[o].id]=g[o]}if(d.camera.edgequadtree!==e&&(T=d.camera.edgequadtree.point(A.x,A.y)),T.length)for(o=0,h=T.length;o<h;o++)u=T[o],f=d.graph.nodes(u.source),m=d.graph.nodes(u.target),c=u[t+"size"]||u["read_"+t+"size"],!u.hidden&&!f.hidden&&!m.hidden&&(!r||v[u.source]||v[u.target])&&sigma.utils.getDistance(f[t+"x"],f[t+"y"],E,w)>f[t+"size"]&&sigma.utils.getDistance(m[t+"x"],m[t+"y"],E,w)>m[t+"size"]&&("curve"==u.type||"curvedArrow"==u.type?f.id===m.id?(p=sigma.utils.getSelfLoopControlPoints(f[t+"x"],f[t+"y"],f[t+"size"]),sigma.utils.isPointOnBezierCurve(E,w,f[t+"x"],f[t+"y"],m[t+"x"],m[t+"y"],p.x1,p.y1,p.x2,p.y2,Math.max(c,x))&&s(b,u)):(p=sigma.utils.getQuadraticControlPoint(f[t+"x"],f[t+"y"],m[t+"x"],m[t+"y"]),sigma.utils.isPointOnQuadraticCurve(E,w,f[t+"x"],f[t+"y"],m[t+"x"],m[t+"y"],p.x,p.y,Math.max(c,x))&&s(b,u)):sigma.utils.isPointOnSegment(E,w,f[t+"x"],f[t+"y"],m[t+"x"],m[t+"y"],Math.max(c,x))&&s(b,u));return b}var r,o,n,a,d=this;for(r=0,o=this.captors.length;r<o;r++)!function(e){function t(e){d.settings("eventsEnabled")&&(d.dispatchEvent("click",e.data),l=i(e),h=s(e),l.length?(d.dispatchEvent("clickNode",{node:l[0],captor:e.data}),d.dispatchEvent("clickNodes",{node:l,captor:e.data})):h.length?(d.dispatchEvent("clickEdge",{edge:h[0],captor:e.data}),d.dispatchEvent("clickEdges",{edge:h,captor:e.data})):d.dispatchEvent("clickStage",{captor:e.data}))}function r(e){d.settings("eventsEnabled")&&(d.dispatchEvent("doubleClick",e.data),l=i(e),h=s(e),l.length?(d.dispatchEvent("doubleClickNode",{node:l[0],captor:e.data}),d.dispatchEvent("doubleClickNodes",{node:l,captor:e.data})):h.length?(d.dispatchEvent("doubleClickEdge",{edge:h[0],captor:e.data}),d.dispatchEvent("doubleClickEdges",{edge:h,captor:e.data})):d.dispatchEvent("doubleClickStage",{captor:e.data}))}function o(e){d.settings("eventsEnabled")&&(d.dispatchEvent("rightClick",e.data),l=i(e),h=s(e),l.length?(d.dispatchEvent("rightClickNode",{node:l[0],captor:e.data}),d.dispatchEvent("rightClickNodes",{node:l,captor:e.data})):h.length?(d.dispatchEvent("rightClickEdge",{edge:h[0],captor:e.data}),d.dispatchEvent("rightClickEdges",{edge:h,captor:e.data})):d.dispatchEvent("rightClickStage",{captor:e.data}))}function n(e){if(d.settings("eventsEnabled")){var t,i,s,r,o=[],n=[];for(t in g)o.push(g[t]);for(g={},i=0,s=o.length;i<s;i++)d.dispatchEvent("outNode",{node:o[i],captor:e.data});for(o.length&&d.dispatchEvent("outNodes",{nodes:o,captor:e.data}),u={},i=0,r=n.length;i<r;i++)d.dispatchEvent("outEdge",{edge:n[i],captor:e.data});n.length&&d.dispatchEvent("outEdges",{edges:n,captor:e.data})}}function a(e){if(d.settings("eventsEnabled")){l=i(e),h=s(e);var t,r,o,n,a=[],c=[],f={},m=l.length,p=[],y=[],x={},v=h.length;for(t=0;t<m;t++)o=l[t],f[o.id]=o,g[o.id]||(c.push(o),g[o.id]=o);for(r in g)f[r]||(a.push(g[r]),delete g[r]);for(t=0,m=c.length;t<m;t++)d.dispatchEvent("overNode",{node:c[t],captor:e.data});for(t=0,m=a.length;t<m;t++)d.dispatchEvent("outNode",{node:a[t],captor:e.data});for(c.length&&d.dispatchEvent("overNodes",{nodes:c,captor:e.data}),a.length&&d.dispatchEvent("outNodes",{nodes:a,captor:e.data}),t=0;t<v;t++)n=h[t],x[n.id]=n,u[n.id]||(y.push(n),u[n.id]=n);for(r in u)x[r]||(p.push(u[r]),delete u[r]);for(t=0,v=y.length;t<v;t++)d.dispatchEvent("overEdge",{edge:y[t],captor:e.data});for(t=0,v=p.length;t<v;t++)d.dispatchEvent("outEdge",{edge:p[t],captor:e.data});y.length&&d.dispatchEvent("overEdges",{edges:y,captor:e.data}),p.length&&d.dispatchEvent("outEdges",{edges:p,captor:e.data})}}var l,h,g={},u={};e.bind("click",t),e.bind("mousedown",a),e.bind("mouseup",a),e.bind("mousemove",a),e.bind("mouseout",n),e.bind("doubleclick",r),e.bind("rightclick",o),d.bind("render",a)}(this.captors[r])}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindDOMEvents=function(e){function t(e){this.attr=function(t){return e.getAttributeNS(null,t)},this.tag=e.tagName,this.class=this.attr("class"),this.id=this.attr("id"),this.isNode=function(){return!!~this.class.indexOf(n.settings("classPrefix")+"-node")},this.isEdge=function(){return!!~this.class.indexOf(n.settings("classPrefix")+"-edge")},this.isHover=function(){return!!~this.class.indexOf(n.settings("classPrefix")+"-hover")}}function i(e){if(n.settings("eventsEnabled")){n.dispatchEvent("click",e);var i=new t(e.target);i.isNode()?n.dispatchEvent("clickNode",{node:a.nodes(i.attr("data-node-id"))}):n.dispatchEvent("clickStage"),e.preventDefault(),e.stopPropagation()}}function s(e){if(n.settings("eventsEnabled")){n.dispatchEvent("doubleClick",e);var i=new t(e.target);i.isNode()?n.dispatchEvent("doubleClickNode",{node:a.nodes(i.attr("data-node-id"))}):n.dispatchEvent("doubleClickStage"),e.preventDefault(),e.stopPropagation()}}function r(e){var i=e.toElement||e.target;if(n.settings("eventsEnabled")&&i){var s=new t(i);if(s.isNode())n.dispatchEvent("overNode",{node:a.nodes(s.attr("data-node-id"))});else if(s.isEdge()){var r=a.edges(s.attr("data-edge-id"));n.dispatchEvent("overEdge",{edge:r,source:a.nodes(r.source),target:a.nodes(r.target)})}}}function o(e){var i=e.fromElement||e.originalTarget;if(n.settings("eventsEnabled")){var s=new t(i);if(s.isNode())n.dispatchEvent("outNode",{node:a.nodes(s.attr("data-node-id"))});else if(s.isEdge()){var r=a.edges(s.attr("data-edge-id"));n.dispatchEvent("outEdge",{edge:r,source:a.nodes(r.source),target:a.nodes(r.target)})}}}var n=this,a=this.graph;e.addEventListener("click",i,!1),sigma.utils.doubleClick(e,"click",s),e.addEventListener("touchstart",i,!1),sigma.utils.doubleClick(e,"touchstart",s),e.addEventListener("mouseover",r,!0),e.addEventListener("mouseout",o,!0)}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.drawHovers=function(e){function t(){var t,o,n,a,d,l=i.contexts.hover.canvas,h=i.settings("defaultNodeType"),g=i.settings("defaultEdgeType"),u=sigma.canvas.hovers,c=sigma.canvas.edgehovers,f=sigma.canvas.extremities,m=i.settings.embedObjects({prefix:e});if(i.contexts.hover.clearRect(0,0,l.width,l.height),m("enableHovering")&&m("singleHover")&&Object.keys(s).length&&(a=s[Object.keys(s)[0]],(u[a.type]||u[h]||u.def)(a,i.contexts.hover,m)),m("enableHovering")&&!m("singleHover"))for(t in s)(u[s[t].type]||u[h]||u.def)(s[t],i.contexts.hover,m);if(m("enableEdgeHovering")&&m("singleHover")&&Object.keys(r).length&&(d=r[Object.keys(r)[0]],o=i.graph.nodes(d.source),n=i.graph.nodes(d.target),d.hidden||((c[d.type]||c[g]||c.def)(d,o,n,i.contexts.hover,m),m("edgeHoverExtremities")?(f[d.type]||f.def)(d,o,n,i.contexts.hover,m):((sigma.canvas.nodes[o.type]||sigma.canvas.nodes.def)(o,i.contexts.hover,m),(sigma.canvas.nodes[n.type]||sigma.canvas.nodes.def)(n,i.contexts.hover,m)))),m("enableEdgeHovering")&&!m("singleHover"))for(t in r)d=r[t],o=i.graph.nodes(d.source),n=i.graph.nodes(d.target),d.hidden||((c[d.type]||c[g]||c.def)(d,o,n,i.contexts.hover,m),m("edgeHoverExtremities")?(f[d.type]||f.def)(d,o,n,i.contexts.hover,m):((sigma.canvas.nodes[o.type]||sigma.canvas.nodes.def)(o,i.contexts.hover,m),(sigma.canvas.nodes[n.type]||sigma.canvas.nodes.def)(n,i.contexts.hover,m)))}var i=this,s={},r={};this.bind("overNode",function(e){var i=e.data.node;i.hidden||(s[i.id]=i,t())}),this.bind("outNode",function(e){delete s[e.data.node.id],t()}),this.bind("overEdge",function(e){var i=e.data.edge;i.hidden||(r[i.id]=i,t())}),this.bind("outEdge",function(e){delete r[e.data.edge.id],t()}),this.bind("render",function(e){t()})}}.call(this),function(undefined){"use strict";function Supervisor(sigInst,options){var _this=this,workerFn=sigInst.getForceAtlas2Worker&&sigInst.getForceAtlas2Worker();if(options=options||{},_root.URL=_root.URL||_root.webkitURL,this.sigInst=sigInst,this.graph=this.sigInst.graph,this.ppn=10,this.ppe=3,this.config={},this.shouldUseWorker=!1!==options.worker&&webWorkers,this.workerUrl=options.workerUrl,this.started=!1,this.running=!1,this.shouldUseWorker){if(this.workerUrl)this.worker=new Worker(this.workerUrl);else{var blob=this.makeBlob(workerFn);this.worker=new Worker(URL.createObjectURL(blob))}this.worker.postMessage=this.worker.webkitPostMessage||this.worker.postMessage}else eval(workerFn);this.msgName=this.worker?"message":"newCoords",this.listener=function(e){_this.nodesByteArray=new Float32Array(e.data.nodes),_this.running&&(_this.applyLayoutChanges(),_this.sendByteArrayToWorker(),_this.sigInst.refresh())},(this.worker||document).addEventListener(this.msgName,this.listener),this.graphToByteArrays(),sigInst.bind("kill",function(){sigInst.killForceAtlas2()})}if("undefined"==typeof sigma)throw"sigma is not declared";var _root=this,webWorkers="Worker"in _root;Supervisor.prototype.makeBlob=function(e){var t;try{t=new Blob([e],{type:"application/javascript"})}catch(i){_root.BlobBuilder=_root.BlobBuilder||_root.WebKitBlobBuilder||_root.MozBlobBuilder,t=new BlobBuilder,t.append(e),t=t.getBlob()}return t},Supervisor.prototype.graphToByteArrays=function(){var e,t,i,s=this.graph.nodes(),r=this.graph.edges(),o=s.length*this.ppn,n=r.length*this.ppe,a={};for(this.nodesByteArray=new Float32Array(o),this.edgesByteArray=new Float32Array(n),e=t=0,i=s.length;e<i;e++)a[s[e].id]=t,this.nodesByteArray[t]=s[e].x,this.nodesByteArray[t+1]=s[e].y,this.nodesByteArray[t+2]=0,this.nodesByteArray[t+3]=0,this.nodesByteArray[t+4]=0,this.nodesByteArray[t+5]=0,this.nodesByteArray[t+6]=1+this.graph.degree(s[e].id),this.nodesByteArray[t+7]=1,this.nodesByteArray[t+8]=s[e].size,this.nodesByteArray[t+9]=0,t+=this.ppn;for(e=t=0,i=r.length;e<i;e++)this.edgesByteArray[t]=a[r[e].source],this.edgesByteArray[t+1]=a[r[e].target],this.edgesByteArray[t+2]=r[e].weight||0,t+=this.ppe},Supervisor.prototype.applyLayoutChanges=function(){for(var e=this.graph.nodes(),t=0,i=0,s=this.nodesByteArray.length;i<s;i+=this.ppn)e[t].x=this.nodesByteArray[i],e[t].y=this.nodesByteArray[i+1],t++},Supervisor.prototype.sendByteArrayToWorker=function(e){var t={action:e||"loop",nodes:this.nodesByteArray.buffer},i=[this.nodesByteArray.buffer];"start"===e&&(t.config=this.config||{},t.edges=this.edgesByteArray.buffer,i.push(this.edgesByteArray.buffer)),this.shouldUseWorker?this.worker.postMessage(t,i):_root.postMessage(t,"*")},Supervisor.prototype.start=function(){if(!this.running){this.running=!0;var e,t;for(e in this.sigInst.cameras)t=this.sigInst.cameras[e],t.edgequadtree._enabled=!1;this.started?this.sendByteArrayToWorker():(this.sendByteArrayToWorker("start"),this.started=!0)}},Supervisor.prototype.stop=function(){if(this.running){var e,t,i;for(e in this.sigInst.cameras)t=this.sigInst.cameras[e],t.edgequadtree._enabled=!0,i=sigma.utils.getBoundaries(this.graph,t.readPrefix),t.settings("drawEdges")&&t.settings("enableEdgeHovering")&&t.edgequadtree.index(this.sigInst.graph,{prefix:t.readPrefix,bounds:{x:i.minX,y:i.minY,width:i.maxX-i.minX,height:i.maxY-i.minY}});this.running=!1}},Supervisor.prototype.killWorker=function(){this.worker?this.worker.terminate():(_root.postMessage({action:"kill"},"*"),document.removeEventListener(this.msgName,this.listener))},Supervisor.prototype.configure=function(e){if(this.config=e,this.started){var t={action:"config",config:this.config};this.shouldUseWorker?this.worker.postMessage(t):_root.postMessage(t,"*")}},sigma.prototype.startForceAtlas2=function(e){return this.supervisor||(this.supervisor=new Supervisor(this,e)),e&&this.supervisor.configure(e),this.supervisor.start(),this},sigma.prototype.stopForceAtlas2=function(){return this.supervisor?(this.supervisor.stop(),this):this},sigma.prototype.killForceAtlas2=function(){return this.supervisor?(this.supervisor.stop(),this.supervisor.killWorker(),this.supervisor=null,this):this},sigma.prototype.configForceAtlas2=function(e){return this.supervisor||(this.supervisor=new Supervisor(this,e)),this.supervisor.configure(e),this},sigma.prototype.isForceAtlas2Running=function(e){return!!this.supervisor&&this.supervisor.running}}.call(this),function(undefined){"use strict";function no_crush(e){var t,i,s,r=["x","y","dx","dy","old_dx","old_dy","mass","convergence","size","fixed"],o=["source","target","weight"],n=["node","centerX","centerY","size","nextSibling","firstChild","mass","massCenterX","massCenterY"];for(i=0,s=n.length;i<s;i++)t=new RegExp("rp\\(([^,]*), '"+n[i]+"'\\)","g"),e=e.replace(t,0===i?"$1":"$1 + "+i);for(i=0,s=r.length;i<s;i++)t=new RegExp("np\\(([^,]*), '"+r[i]+"'\\)","g"),e=e.replace(t,0===i?"$1":"$1 + "+i);for(i=0,s=o.length;i<s;i++)t=new RegExp("ep\\(([^,]*), '"+o[i]+"'\\)","g"),e=e.replace(t,0===i?"$1":"$1 + "+i);return e}function getWorkerFn(){return";("+(crush?crush(Worker.toString()):Worker.toString())+").call(this);"}var _root=this,inWebWorker=!("document"in _root),Worker=function(e){function t(){var e,t,i={},s=arguments.length;for(e=s-1;e>=0;e--)for(t in arguments[e])i[t]=arguments[e][t];return i}function i(e){var t;for(t in e)"hasOwnProperty"in e&&!e.hasOwnProperty(t)||delete e[t];return e}function s(e,t,i){i=i||{},a=e,d=t,g.nodesLength=a.length,g.edgesLength=d.length,r(i)}function r(e){g.settings=t(e,g.settings)}function o(){var e,t,i,s,r,o,n,h,u,c,f,m,p,y,x;for(i=0;i<g.nodesLength;i+=g.ppn)a[i+4]=a[i+2],a[i+5]=a[i+3],a[i+2]=0,a[i+3]=0;if(g.settings.outboundAttractionDistribution){for(u=0,i=0;i<g.nodesLength;i+=g.ppn)u+=a[i+6];u/=g.nodesLength}if(g.settings.barnesHutOptimize){var v,b,E=1/0,w=-1/0,A=1/0,T=-1/0;for(l=[],i=0;i<g.nodesLength;i+=g.ppn)E=Math.min(E,a[i]),w=Math.max(w,a[i]),A=Math.min(A,a[i+1]),T=Math.max(T,a[i+1]);for(l[0]=-1,l[1]=(E+w)/2,l[2]=(A+T)/2,l[3]=Math.max(w-E,T-A),l[4]=-1,l[5]=-1,l[6]=0,l[7]=0,l[8]=0,e=1,i=0;i<g.nodesLength;i+=g.ppn)for(t=0;;)if(l[t+5]>=0)v=a[i]<l[t+1]?a[i+1]<l[t+2]?l[t+5]:l[t+5]+g.ppr:a[i+1]<l[t+2]?l[t+5]+2*g.ppr:l[t+5]+3*g.ppr,l[t+7]=(l[t+7]*l[t+6]+a[i]*a[i+6])/(l[t+6]+a[i+6]),l[t+8]=(l[t+8]*l[t+6]+a[i+1]*a[i+6])/(l[t+6]+a[i+6]),l[t+6]+=a[i+6],t=v;else{if(l[t]<0){l[t]=i;break}if(l[t+5]=e*g.ppr,n=l[t+3]/2,h=l[t+5],l[h]=-1,l[h+1]=l[t+1]-n,l[h+2]=l[t+2]-n,l[h+3]=n,l[h+4]=h+g.ppr,l[h+5]=-1,l[h+6]=0,l[h+7]=0,l[h+8]=0,h+=g.ppr,l[h]=-1,l[h+1]=l[t+1]-n,l[h+2]=l[t+2]+n,l[h+3]=n,l[h+4]=h+g.ppr,l[h+5]=-1,l[h+6]=0,l[h+7]=0,l[h+8]=0,h+=g.ppr,l[h]=-1,l[h+1]=l[t+1]+n,l[h+2]=l[t+2]-n,l[h+3]=n,l[h+4]=h+g.ppr,l[h+5]=-1,l[h+6]=0,l[h+7]=0,l[h+8]=0,h+=g.ppr,l[h]=-1,l[h+1]=l[t+1]+n,l[h+2]=l[t+2]+n,l[h+3]=n,l[h+4]=l[t+4],l[h+5]=-1,l[h+6]=0,l[h+7]=0,l[h+8]=0,e+=4,v=a[l[t]]<l[t+1]?a[l[t]+1]<l[t+2]?l[t+5]:l[t+5]+g.ppr:a[l[t]+1]<l[t+2]?l[t+5]+2*g.ppr:l[t+5]+3*g.ppr,l[t+6]=a[l[t]+6],l[t+7]=a[l[t]],l[t+8]=a[l[t]+1],l[v]=l[t],l[t]=-1,b=a[i]<l[t+1]?a[i+1]<l[t+2]?l[t+5]:l[t+5]+g.ppr:a[i+1]<l[t+2]?l[t+5]+2*g.ppr:l[t+5]+3*g.ppr,v!==b){l[b]=i;break}t=v}}if(g.settings.barnesHutOptimize)for(c=g.settings.scalingRatio,i=0;i<g.nodesLength;i+=g.ppn)for(t=0;;)if(l[t+5]>=0){if(y=Math.sqrt(Math.pow(a[i]-l[t+7],2)+Math.pow(a[i+1]-l[t+8],2)),2*l[t+3]/y<g.settings.barnesHutTheta){if(f=a[i]-l[t+7],m=a[i+1]-l[t+8],g.settings.adjustSizes?y>0?(x=c*a[i+6]*l[t+6]/y/y,a[i+2]+=f*x,a[i+3]+=m*x):y<0&&(x=-c*a[i+6]*l[t+6]/y,a[i+2]+=f*x,a[i+3]+=m*x):y>0&&(x=c*a[i+6]*l[t+6]/y/y,a[i+2]+=f*x,a[i+3]+=m*x),l[t+4]<0)break;t=l[t+4];continue}t=l[t+5]}else{if(l[t]>=0&&l[t]!==i&&(f=a[i]-a[l[t]],m=a[i+1]-a[l[t]+1],y=Math.sqrt(f*f+m*m),g.settings.adjustSizes?y>0?(x=c*a[i+6]*a[l[t]+6]/y/y,a[i+2]+=f*x,a[i+3]+=m*x):y<0&&(x=-c*a[i+6]*a[l[t]+6]/y,a[i+2]+=f*x,a[i+3]+=m*x):y>0&&(x=c*a[i+6]*a[l[t]+6]/y/y,a[i+2]+=f*x,a[i+3]+=m*x)),l[t+4]<0)break;t=l[t+4]}else for(c=g.settings.scalingRatio,s=0;s<g.nodesLength;s+=g.ppn)for(r=0;r<s;r+=g.ppn)f=a[s]-a[r],m=a[s+1]-a[r+1],g.settings.adjustSizes?(y=Math.sqrt(f*f+m*m)-a[s+8]-a[r+8],y>0?(x=c*a[s+6]*a[r+6]/y/y,a[s+2]+=f*x,a[s+3]+=m*x,a[r+2]+=f*x,a[r+3]+=m*x):y<0&&(x=100*c*a[s+6]*a[r+6],a[s+2]+=f*x,a[s+3]+=m*x,a[r+2]-=f*x,a[r+3]-=m*x)):(y=Math.sqrt(f*f+m*m))>0&&(x=c*a[s+6]*a[r+6]/y/y,a[s+2]+=f*x,a[s+3]+=m*x,a[r+2]-=f*x,a[r+3]-=m*x);for(h=g.settings.gravity/g.settings.scalingRatio,c=g.settings.scalingRatio,i=0;i<g.nodesLength;i+=g.ppn)x=0,f=a[i],m=a[i+1],y=Math.sqrt(Math.pow(f,2)+Math.pow(m,2)),g.settings.strongGravityMode?y>0&&(x=c*a[i+6]*h):y>0&&(x=c*a[i+6]*h/y),a[i+2]-=f*x,a[i+3]-=m*x;for(c=1*(g.settings.outboundAttractionDistribution?u:1),o=0;o<g.edgesLength;o+=g.ppe)s=d[o],r=d[o+1],n=d[o+2],p=Math.pow(n,g.settings.edgeWeightInfluence),f=a[s]-a[r],m=a[s+1]-a[r+1],g.settings.adjustSizes?(y=Math.sqrt(Math.pow(f,2)+Math.pow(m,2)-a[s+8]-a[r+8]),g.settings.linLogMode?g.settings.outboundAttractionDistribution?y>0&&(x=-c*p*Math.log(1+y)/y/a[s+6]):y>0&&(x=-c*p*Math.log(1+y)/y):g.settings.outboundAttractionDistribution?y>0&&(x=-c*p/a[s+6]):y>0&&(x=-c*p)):(y=Math.sqrt(Math.pow(f,2)+Math.pow(m,2)),g.settings.linLogMode?g.settings.outboundAttractionDistribution?y>0&&(x=-c*p*Math.log(1+y)/y/a[s+6]):y>0&&(x=-c*p*Math.log(1+y)/y):g.settings.outboundAttractionDistribution?(y=1,x=-c*p/a[s+6]):(y=1,x=-c*p)),y>0&&(a[s+2]+=f*x,a[s+3]+=m*x,a[r+2]-=f*x,a[r+3]-=m*x);var S,_,C,M;if(g.settings.adjustSizes)for(i=0;i<g.nodesLength;i+=g.ppn)a[i+9]||(S=Math.sqrt(Math.pow(a[i+2],2)+Math.pow(a[i+3],2)),S>g.maxForce&&(a[i+2]=a[i+2]*g.maxForce/S,a[i+3]=a[i+3]*g.maxForce/S),_=a[i+6]*Math.sqrt((a[i+4]-a[i+2])*(a[i+4]-a[i+2])+(a[i+5]-a[i+3])*(a[i+5]-a[i+3])),C=Math.sqrt((a[i+4]+a[i+2])*(a[i+4]+a[i+2])+(a[i+5]+a[i+3])*(a[i+5]+a[i+3]))/2,M=.1*Math.log(1+C)/(1+Math.sqrt(_)),a[i]=a[i]+a[i+2]*(M/g.settings.slowDown),a[i+1]=a[i+1]+a[i+3]*(M/g.settings.slowDown));else for(i=0;i<g.nodesLength;i+=g.ppn)a[i+9]||(_=a[i+6]*Math.sqrt((a[i+4]-a[i+2])*(a[i+4]-a[i+2])+(a[i+5]-a[i+3])*(a[i+5]-a[i+3])),C=Math.sqrt((a[i+4]+a[i+2])*(a[i+4]+a[i+2])+(a[i+5]+a[i+3])*(a[i+5]+a[i+3]))/2,M=a[i+7]*Math.log(1+C)/(1+Math.sqrt(_)),a[i+7]=Math.min(1,Math.sqrt(M*(Math.pow(a[i+2],2)+Math.pow(a[i+3],2))/(1+Math.sqrt(_)))),a[i]=a[i]+a[i+2]*(M/g.settings.slowDown),a[i+1]=a[i+1]+a[i+3]*(M/g.settings.slowDown));g.iterations++}function n(e){for(var t=0;t<e;t++)o();h()}var a,d,l,h,g={ppn:10,ppe:3,ppr:9,maxForce:10,iterations:0,converged:!1,settings:{linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:0,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5,startingIterations:1,iterationsPerRender:1}};h="undefined"!=typeof window&&window.document?function(){var e;document.createEvent?(e=document.createEvent("Event"),e.initEvent("newCoords",!0,!1)):(e=document.createEventObject(),e.eventType="newCoords"),e.eventName="newCoords",e.data={nodes:a.buffer},requestAnimationFrame(function(){document.dispatchEvent(e)})}:function(){self.postMessage({nodes:a.buffer},[a.buffer])};var u=function(e){switch(e.data.action){case"start":s(new Float32Array(e.data.nodes),new Float32Array(e.data.edges),e.data.config),n(g.settings.startingIterations);break;case"loop":a=new Float32Array(e.data.nodes),n(g.settings.iterationsPerRender);break;case"config":r(e.data.config);break;case"kill":i(g),a=null,d=null,l=null,self.removeEventListener("message",u)}};self.addEventListener("message",u)},crush=null;if(inWebWorker)eval(getWorkerFn());else{if("undefined"==typeof sigma)throw"sigma is not declared";sigma.prototype.getForceAtlas2Worker=getWorkerFn}}.call(this),function(){"use strict";function e(e,t){function i(e){var t=window.getComputedStyle(e),i=function(e){return parseInt(t.getPropertyValue(e).replace("px",""))||0};return{left:e.getBoundingClientRect().left+i("padding-left"),top:e.getBoundingClientRect().top+i("padding-top")}}function s(e){v=!1,g.removeEventListener("mousemove",d),g.removeEventListener("mouseup",a),y.length||(m=null)}function r(e){x[e.data.node.id]||(y.push(e.data.node),x[e.data.node.id]=!0,y.length&&!v&&(m=y[y.length-1],c.addEventListener("mousedown",n)))}function o(e){var t=y.map(function(e){return e}).indexOf(e.data.node);y.splice(t,1),delete x[e.data.node.id],y.length&&!v?m=y[y.length-1]:c.removeEventListener("mousedown",n)}function n(e){v=!0;var t=h.graph.nodes().length;if(m&&t>1){c.removeEventListener("mousedown",n),g.addEventListener("mousemove",d),g.addEventListener("mouseup",a);var i,s;for(i in h.cameras)s=h.cameras[i],void 0!==s.edgequadtree&&(s.edgequadtree._enabled=!1);u.settings({mouseEnabled:!1,enableHovering:!1}),h.refresh(),l.dispatchEvent("startdrag",{node:m,
captor:e,renderer:u})}}function a(e){v=!1,c.addEventListener("mousedown",n),g.removeEventListener("mousemove",d),g.removeEventListener("mouseup",a);var t,i;for(t in h.cameras)i=h.cameras[t],void 0!==i.edgequadtree&&(i.edgequadtree._enabled=!0);u.settings({mouseEnabled:!0,enableHovering:!0}),h.refresh(),b&&l.dispatchEvent("drop",{node:m,captor:e,renderer:u}),l.dispatchEvent("dragend",{node:m,captor:e,renderer:u}),b=!1,m=null}function d(e){function t(){for(var t=i(u.container),s=e.clientX-t.left,r=e.clientY-t.top,o=Math.cos(f.angle),n=Math.sin(f.angle),a=h.graph.nodes(),d=[],g=0;g<2;g++){var c=a[g],y={x:c.x*o+c.y*n,y:c.y*o-c.x*n,renX:c[p+"x"],renY:c[p+"y"]};d.push(y)}if(d[0].x===d[1].x&&d[0].y===d[1].y){var x=0===d[0].renX?1:d[0].renX,v=0===d[0].renY?1:d[0].renY;s=d[0].x/x*(s-d[0].renX)+d[0].x,r=d[0].y/v*(r-d[0].renY)+d[0].y}else{var x=(d[1].renX-d[0].renX)/(d[1].x-d[0].x),v=(d[1].renY-d[0].renY)/(d[1].y-d[0].y);d[1].x===d[0].x&&(x=v),d[1].y===d[0].y&&(v=x),s=(s-d[0].renX)/x+d[0].x,r=(r-d[0].renY)/v+d[0].y}m.x=s*o-r*n,m.y=r*o+s*n,h.refresh(),b=!0,l.dispatchEvent("drag",{node:m,captor:e,renderer:u})}if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){clearTimeout(s);var s=setTimeout(t,0)}else t()}sigma.classes.dispatcher.extend(this);var l=this,h=e,g=document.body,u=t,c=t.container.lastChild,f=t.camera,m=null,p="",y=[],x={},v=!1,b=!1;t instanceof sigma.renderers.svg&&(c=t.container.firstChild),p=t instanceof sigma.renderers.webgl?t.options.prefix.substr(5):t.options.prefix,t.bind("overNode",r),t.bind("outNode",o),t.bind("click",s),h.bind("kill",function(){l.unbindAll()}),this.unbindAll=function(){c.removeEventListener("mousedown",n),g.removeEventListener("mousemove",d),g.removeEventListener("mouseup",a),u.unbind("overNode",r),u.unbind("outNode",o)}}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var t={};sigma.plugins.dragNodes=function(i,s){return t[i.id]||(t[i.id]=new e(i,s)),i.bind("kill",function(){sigma.plugins.killDragNodes(i)}),t[i.id]},sigma.plugins.killDragNodes=function(i){t[i.id]instanceof e&&(t[i.id].unbindAll(),delete t[i.id])}}.call(window);